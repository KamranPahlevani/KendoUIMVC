/*
* Kendo UI v2014.3.1119 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(t,define){define(["./kendo.combobox.min","./kendo.dropdownlist.min","./kendo.window.min","./kendo.colorpicker.min","./kendo.imagebrowser.min","./kendo.filebrowser.min"],t)}(function(){return function(t,e){var n,i,o,r,a=window.kendo,s=a.Class,l=a.ui.Widget,c=a.support.mobileOS,h=a.support.browser,d=t.extend,u=t.proxy,f=a.deepExtend,p=".kendoEditor",g=a.keys,m=s.extend({init:function(t){this.options=t},getHtml:function(){var t=this.options;return a.template(t.template,{useWithBlock:!1})(t)}}),v={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'<a href="" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= data.cssClass #">#= data.title #</span></a>',colorPickerTemplate:'<div class="k-colorpicker #= data.cssClass #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>',separatorTemplate:'<span class="k-separator" />',formatByName:function(e,n){for(var i=0;n.length>i;i++)if(t.inArray(e,n[i].tags)>=0)return n[i]},registerTool:function(t,e){var n=e.options;n&&n.template&&(n.template.options.cssClass="k-"+t),e.name||(e.options.name=t,e.name=t.toLowerCase()),b.defaultTools[t]=e},registerFormat:function(t,e){b.fn.options.formats[t]=e}},_={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",createTable:"Create table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column"},y=!c||c.ios&&c.flatVersion>=500||!c.ios&&e!==document.documentElement.contentEditable,w={basic:["bold","italic","underline"],alignment:["justifyLeft","justifyCenter","justifyRight"],lists:["insertUnorderedList","insertOrderedList"],indenting:["indent","outdent"],links:["createLink","unlink"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"]},b=l.extend({init:function(e,n){var i,o,r,s,c=this,h=a.ui.editor;y&&(l.fn.init.call(c,e,n),c.options=f({},c.options,n),e=c.element,s=h.Dom.name(e[0]),e.closest("form").on("submit"+p,function(){c.update()}),r=d({},c.options),r.editor=c,"textarea"==s?(c._wrapTextarea(),o=c.wrapper.find(".k-editor-toolbar"),e[0].id&&o.attr("aria-controls",e[0].id)):(c.element.attr("contenteditable",!0).addClass("k-widget k-editor k-editor-inline"),r.popup=!0,o=t('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(e)),c.toolbar=new h.Toolbar(o[0],r),c.toolbar.bindTo(c),"textarea"==s&&setTimeout(function(){var t=c.wrapper[0].style.height,e=parseInt(t,10),n=c.wrapper.height();t.indexOf("px")>0&&!isNaN(e)&&n>e&&c.wrapper.height(e-(n-e))}),c._initializeContentElement(c),c.keyboard=new h.Keyboard([new h.TypingHandler(c),new h.BackspaceHandler(c),new h.SystemHandler(c)]),c.clipboard=new h.Clipboard(this),c.undoRedoStack=new h.UndoRedoStack,i=n&&n.value?n.value:c.textarea?e.val().replace(/[\r\n\v\f\t ]+/gi," "):e[0].innerHTML,c.value(i),t(document).on("mousedown",u(c._endTyping,c)).on("mouseup",u(c._mouseup,c)),a.notify(c))},_endTyping:function(){var t=this.keyboard;try{t.isTypingInProgress()&&(t.endTyping(!0),this.saveSelection())}catch(e){}},_selectionChange:function(){h.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_wrapTextarea:function(){var e=this,n=e.element,i=n[0].style.width,o=n[0].style.height,r=v.editorWrapperTemplate,a=t(r).insertBefore(n).width(i).height(o),s=a.find(".k-editable-area");n.attr("autocomplete","off").appendTo(s).addClass("k-content k-raw-content").css("display","none"),e.textarea=n,e.wrapper=a},_createContentElement:function(e){var n,i,o,r=this,s=r.textarea,l=r.options.domain,c=l||document.domain,h="",d='javascript:""';return(l||c!=location.hostname)&&(h='<script>document.domain="'+c+'"</script>',d="javascript:document.write('"+h+"')"),s.hide(),n=t("<iframe />",{frameBorder:"0"})[0],t(n).css("display","").addClass("k-content").insertBefore(s),n.src=d,i=n.contentWindow||n,o=i.document||n.contentDocument,t(n).one("load",function(){r.toolbar.decorateFrom(o.body)}),o.open(),o.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{font-size:12px;font-family:Verdana,Geneva,sans-serif;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(a.support.isRtl(s)?"direction:rtl;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}</style>"+h+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');</script>"+t.map(e,function(t){return"<link rel='stylesheet' href='"+t+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),o.close(),i},_blur:function(){var t=this.textarea,e=t?t.val():this._oldValue,n=this.options.encoded?this.encodedValue():this.value();this.update(),t&&t.trigger("blur"),n!=e&&this.trigger("change")},_initializeContentElement:function(){var n,i,o=this;o.textarea?(o.window=o._createContentElement(o.options.stylesheets),n=o.document=o.window.contentDocument||o.window.document,o.body=n.body,i=o.window,t(n).on("mouseup"+p,u(o._mouseup,o))):(o.window=window,n=o.document=document,o.body=o.element[0],i=o.body,o.toolbar.decorateFrom(o.body)),t(i).on("blur"+p,u(this._blur,this));try{n.execCommand("enableInlineTableEditing",null,!1)}catch(r){}a.support.touch&&t(n).on("selectionchange"+p,u(this._selectionChange,this)).on("keydown"+p,function(){a._activeElement()!=n.body&&o.window.focus()}),t(o.body).on("keydown"+p,function(t){var n,i,r,a,s,l;return t.keyCode===g.F10?(setTimeout(u(o.toolbar.focus,o.toolbar),100),t.preventDefault(),e):((t.keyCode==g.LEFT||t.keyCode==g.RIGHT)&&(n=o.getRange(),i=t.keyCode==g.LEFT,r=n[i?"startContainer":"endContainer"],a=n[i?"startOffset":"endOffset"],s=i?-1:1,i&&(a-=1),a+s>0&&3==r.nodeType&&"ï»¿"==r.nodeValue[a]&&(n.setStart(r,a+s),n.collapse(!0),o.selectRange(n))),(l=o.keyboard.toolFromShortcut(o.toolbar.tools,t))?(t.preventDefault(),/^(undo|redo)$/.test(l)||o.keyboard.endTyping(!0),o.trigger("keydown",t),o.exec(l),!1):(o.keyboard.clearTimeout(),o.keyboard.keydown(t),e))}).on("keyup"+p,function(e){var n=[8,9,33,34,35,36,37,38,39,40,40,45,46];(t.inArray(e.keyCode,n)>-1||65==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey)&&o._selectionChange(),o.keyboard.keyup(e)}).on("mousedown"+p,function(e){if(o._selectionStarted=!0,!h.gecko){var n=t(e.target);(2==e.which||1==e.which&&e.ctrlKey)&&n.is("a[href]")&&window.open(n.attr("href"),"_new")}}).on("click"+p,function(t){var e,n=a.ui.editor.Dom;"img"===n.name(t.target)&&(e=o.createRange(),e.selectNode(t.target),o.selectRange(e))}).on("cut"+p+" paste"+p,function(t){o.clipboard["on"+t.type](t)}).on("focusin"+p,function(){t(this).addClass("k-state-active"),o.toolbar.show(),o.textarea&&o.selectRange(o.getRange())}).on("focusout"+p,function(){setTimeout(function(){var e=a._activeElement(),n=o.body,i=o.toolbar;e==n||t.contains(n,e)||t(e).is(".k-editortoolbar-dragHandle")||i.focused()||(t(n).removeClass("k-state-active"),i.hide())},10)})},_mouseup:function(){var t=this;t._selectionStarted&&setTimeout(function(){t._selectionChange()},1)},refresh:function(){var t=this;t.textarea&&(t.textarea.val(t.value()),t.wrapper.find("iframe").remove(),t._initializeContentElement(t),t.value(t.textarea.val()))},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:_,formats:{},encoded:!0,domain:null,serialization:{entities:!0,scripts:!1},stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],w.basic,w.alignment,w.lists,w.indenting,w.links,["insertImage"],w.tables)},destroy:function(){var e=this;l.fn.destroy.call(e),t(e.window).add(e.document).add(e.body).add(e.wrapper).add(e.element.closest("form")).off(p),t(document).off("mousedown",u(e._endTyping,e)).off("mouseup",u(e._mouseup,e)),e._focusOutside(),e.toolbar.destroy(),a.destroy(e.wrapper)},_focusOutside:function(){if(a.support.browser.msie&&this.textarea){var e=t("<input style='position:absolute;left:-10px;top:-10px;width:1px;height:1px;font-size:0;border:0;' />").appendTo(document.body).focus();e.blur().remove()}},state:function(t){var e,n,i=b.defaultTools[t],o=i&&(i.options.finder||i.finder),r=a.ui.editor.RangeUtils;return o?(e=this.getRange(),n=r.textNodes(e),!n.length&&e.collapsed&&(n=[e.startContainer]),o.getFormat?o.getFormat(n):o.isFormatted(n)):!1},value:function(t){var n=this.body,i=a.ui.editor,o=i.Serializer.domToXhtml(n,this.options.serialization);return t===e?o:(t!=o&&(i.Serializer.htmlToDom(t,n),h.msie||a.ui.editor.Dom.ensureTrailingBreaks(this.body),this.selectionRestorePoint=null,this.update(),this.toolbar.refreshTools()),e)},saveSelection:function(e){e=e||this.getRange();var n=e.commonAncestorContainer,i=this.body;(n==i||t.contains(i,n))&&(this.selectionRestorePoint=new a.ui.editor.RestorePoint(e))},_focusBody:function(){var t,e=this.body,n=this.wrapper&&this.wrapper.find("iframe")[0],i=this.document.documentElement,o=a._activeElement();o!=e&&o!=n&&(t=i.scrollTop,e.focus(),i.scrollTop=t)},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(t){t=t||this.options.encoded?this.encodedValue():this.value(),this.textarea?this.textarea.val(t):this._oldValue=t},encodedValue:function(){return a.ui.editor.Dom.encode(this.value())},createRange:function(t){return a.ui.editor.RangeUtils.createRange(t||this.document)},getSelection:function(){return a.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(t){this._focusBody();var e=this.getSelection();e.removeAllRanges(),e.addRange(t),this.saveSelection(t)},getRange:function(){var t=this.getSelection(),e=t&&t.rangeCount>0?t.getRangeAt(0):this.createRange(),n=this.document;return e.startContainer!=n||e.endContainer!=n||e.startOffset||e.endOffset||(e.setStart(this.body,0),e.collapse(!0)),e},selectedHtml:function(){return a.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(t,e){this.clipboard.paste(t,e)},exec:function(t,n){var i,o,r,a=this,s=null;if(!t)throw Error("kendoEditor.exec(): `name` parameter cannot be empty");if(t=t.toLowerCase(),a.keyboard.isTypingInProgress()||a.restoreSelection(),o=a.toolbar.toolById(t),!o)for(r in b.defaultTools)if(r.toLowerCase()==t){o=b.defaultTools[r];break}if(o){if(i=a.getRange(),o.command&&(s=o.command(d({range:i},n))),a.trigger("execute",{name:t,command:s}),/^(undo|redo)$/i.test(t))a.undoRedoStack[t]();else if(s&&(s.managesUndoRedo||a.undoRedoStack.push(s),s.editor=a,s.exec(),s.async))return s.change=u(a._selectionChange,a),e;a._selectionChange()}}});b.defaultTools={undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},a.ui.plugin(b),n=s.extend({init:function(t){this.options=t},initialize:function(t,e){t.attr({unselectable:"on",title:e.title})},command:function(t){return new this.options.command(t)},update:t.noop}),n.exec=function(t,e,n){t.exec(e,{value:n})},i=n.extend({init:function(t){n.fn.init.call(this,t)},command:function(t){var e=this;return new a.ui.editor.FormatCommand(d(t,{formatter:e.options.formatter}))},update:function(t,e){var n=this.options.finder.isFormatted(e);t.toggleClass("k-state-selected",n),t.attr("aria-pressed",n)}}),v.registerTool("separator",new n({template:new m({template:v.separatorTemplate})})),o=h.msie&&9>h.version?"ï»¿":"",r='<br class="k-br" />',h.msie&&(10>h.version?r="ï»¿":11>h.version&&(r=" ")),d(a.ui,{editor:{ToolTemplate:m,EditorUtils:v,Tool:n,FormatTool:i,_bomFill:o,emptyElementContent:r}})}(window.jQuery),function(t){function e(t){var e,n,i={};for(e=0,n=t.length;n>e;e++)i[t[e]]=!0;return i}var n,i,o,r,a,s,l,c,h,d,u=window.kendo,f=t.map,p=t.extend,g=u.support.browser,m="style",v="float",_="cssFloat",y="styleFloat",w="class",b="k-marker",x=e("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),k="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),C=k.concat(["ul","ol","li"]),S=e(C),T="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),A=e(T),D=e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),P=function(t){1==t.nodeType&&t.normalize()};g.msie&&g.version>=8&&(P=function(t){if(1==t.nodeType&&t.firstChild)for(var e=t.firstChild,n=e;;){if(n=n.nextSibling,!n)break;3==n.nodeType&&3==e.nodeType&&(n.nodeValue=e.nodeValue+n.nodeValue,d.remove(e)),e=n}}),n=/^\s+$/,i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,o=/\ufeff/g,r=/^(\s+|\ufeff)$/,s="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),l=/[<>\&]/g,c=/[\u00A0-\u2666<>\&]/g,h={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},d={block:S,inline:A,findNodeIndex:function(t,e){var n=0;if(!t)return-1;for(;;){if(t=t.previousSibling,!t)break;e&&3==t.nodeType||n++}return n},isDataNode:function(t){return t&&null!==t.nodeValue&&null!==t.data},isAncestorOf:function(e,n){try{return!d.isDataNode(e)&&(t.contains(e,d.isDataNode(n)?n.parentNode:n)||n.parentNode==e)}catch(i){return!1}},isAncestorOrSelf:function(t,e){return d.isAncestorOf(t,e)||t==e},findClosestAncestor:function(t,e){if(d.isAncestorOf(t,e))for(;e&&e.parentNode!=t;)e=e.parentNode;return e},getNodeLength:function(t){return d.isDataNode(t)?t.length:t.childNodes.length},splitDataNode:function(t,e){for(var n=t.cloneNode(!1),i="",o=t;o.nextSibling&&3==o.nextSibling.nodeType&&o.nextSibling.nodeValue;)i+=o.nextSibling.nodeValue,o=o.nextSibling;t.deleteData(e,t.length),n.deleteData(0,e),n.nodeValue+=i,d.insertAfter(n,t)},attrEquals:function(t,e){var n,i;for(n in e)if(i=t[n],n==v&&(i=t[u.support.cssFloat?_:y]),"object"==typeof i){if(!d.attrEquals(i,e[n]))return!1}else if(i!=e[n])return!1;return!0},blockParentOrBody:function(t){return d.parentOfType(t,C)||t.ownerDocument.body},blockParents:function(e){var n,i,o,r=[];for(n=0,i=e.length;i>n;n++)o=d.parentOfType(e[n],d.blockElements),o&&t.inArray(o,r)<0&&r.push(o);return r},windowFromDocument:function(t){return t.defaultView||t.parentWindow},normalize:P,blockElements:C,nonListBlockElements:k,inlineElements:T,empty:x,fillAttrs:D,toHex:function(t){var e=i.exec(t);return e?"#"+f(e.slice(1),function(t){return t=parseInt(t,10).toString(16),t.length>1?t:"0"+t}).join(""):t},encode:function(t,e){var n=!e||e.entities?c:l;return t.replace(n,function(t){var e=t.charCodeAt(0),n=h[e];return n?"&"+n+";":t})},stripBom:function(t){return(t||"").replace(o,"")},insignificant:function(t){var e=t.attributes;return"k-marker"==t.className||d.is(t,"br")&&("k-br"==t.className||e._moz_dirty||e._moz_editor_bogus_node)},emptyNode:function(e){var n=t.grep(e.childNodes,function(t){return d.is(t,"br")?!1:d.insignificant(t)?!1:3==t.nodeType&&r.test(t.nodeValue)?!1:d.is(t,"p")&&d.emptyNode(t)?!1:!0});return!n.length},name:function(t){return t.nodeName.toLowerCase()},significantChildNodes:function(e){return t.grep(e.childNodes,function(t){return 3!=t.nodeType||!d.isWhitespace(t)})},lastTextNode:function(t){var e,n=null;if(3==t.nodeType)return t;for(e=t.lastChild;e;e=e.previousSibling)if(n=d.lastTextNode(e))return n;return n},is:function(t,e){return d.name(t)==e},isMarker:function(t){return t.className==b},isWhitespace:function(t){return n.test(t.nodeValue)},isBlock:function(t){return S[d.name(t)]},isEmpty:function(t){return x[d.name(t)]},isInline:function(t){return A[d.name(t)]},scrollContainer:function(t){var e=d.windowFromDocument(t),n=(e.contentWindow||e).document||e.ownerDocument||e;return n=u.support.browser.webkit||"BackCompat"==n.compatMode?n.body:n.documentElement},scrollTo:function(e){var n,i,o=t(d.isDataNode(e)?e.parentNode:e),r=d.windowFromDocument(e.ownerDocument),a=r.innerHeight,s=d.scrollContainer(e.ownerDocument);"br"==d.name(o[0])&&(o=o.parent()),n=o.offset().top,i=o[0].offsetHeight,i+n>s.scrollTop+a&&(s.scrollTop=i+n-a)},persistScrollTop:function(t){a=d.scrollContainer(t).scrollTop},restoreScrollTop:function(t){d.scrollContainer(t).scrollTop=a},insertAt:function(t,e,n){t.insertBefore(e,t.childNodes[n]||null)},insertBefore:function(t,e){return e.parentNode?e.parentNode.insertBefore(t,e):e},insertAfter:function(t,e){return e.parentNode.insertBefore(t,e.nextSibling)},remove:function(t){t.parentNode.removeChild(t)},removeTextSiblings:function(t){for(var e=t.parentNode;t.nextSibling&&3==t.nextSibling.nodeType;)e.removeChild(t.nextSibling);for(;t.previousSibling&&3==t.previousSibling.nodeType;)e.removeChild(t.previousSibling)},trim:function(t){var e,n;for(e=t.childNodes.length-1;e>=0;e--)n=t.childNodes[e],d.isDataNode(n)?(d.stripBom(n.nodeValue).length||d.remove(n),d.isWhitespace(n)&&d.insertBefore(n,t)):n.className!=b&&(d.trim(n),n.childNodes.length||d.isEmpty(n)||d.remove(n));return t},closest:function(t,e){for(;t&&d.name(t)!=e;)t=t.parentNode;return t},sibling:function(t,e){do t=t[e];while(t&&1!=t.nodeType);return t},next:function(t){return d.sibling(t,"nextSibling")},prev:function(t){return d.sibling(t,"previousSibling")},parentOfType:function(t,e){do t=t.parentNode;while(t&&!d.ofType(t,e));return t},ofType:function(e,n){return t.inArray(d.name(e),n)>=0},changeTag:function(t,e,n){var i,o,r,a,s,l=d.create(t.ownerDocument,e),c=t.attributes;if(!n)for(i=0,o=c.length;o>i;i++)s=c[i],s.specified&&(r=s.nodeName,a=s.nodeValue,r==w?l.className=a:r==m?l.style.cssText=t.style.cssText:l.setAttribute(r,a));for(;t.firstChild;)l.appendChild(t.firstChild);return d.insertBefore(l,t),d.remove(t),l},editableParent:function(t){for(;t&&(3==t.nodeType||"true"!==t.contentEditable);)t=t.parentNode;return t},wrap:function(t,e){return d.insertBefore(e,t),e.appendChild(t),e},unwrap:function(t){for(var e=t.parentNode;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)},create:function(t,e,n){return d.attr(t.createElement(e),n)},attr:function(t,e){e=p({},e),e&&m in e&&(d.style(t,e.style),delete e.style);for(var n in e)null===e[n]?(t.removeAttribute(n),delete e[n]):"className"==n&&(t[n]=e[n]);return p(t,e)},style:function(e,n){t(e).css(n||{})},unstyle:function(t,e){for(var n in e)n==v&&(n=u.support.cssFloat?_:y),t.style[n]="";""===t.style.cssText&&t.removeAttribute(m)},inlineStyle:function(e,n,i){var o,r=t(d.create(e.ownerDocument,n,i));return e.appendChild(r[0]),o=f(s,function(t){return g.msie&&"line-height"==t&&"1px"==r.css(t)?"line-height:1.5":t+":"+r.css(t)}).join(";"),r.remove(),o},getEffectiveBackground:function(t){var e=t.css("background-color");return e.indexOf("rgba(0, 0, 0, 0")<0&&"transparent"!==e?e:"html"===t[0].tagName.toLowerCase()?"Window":d.getEffectiveBackground(t.parent())},removeClass:function(e,n){var i,o,r=" "+e.className+" ",a=n.split(" ");for(i=0,o=a.length;o>i;i++)r=r.replace(" "+a[i]+" "," ");r=t.trim(r),r.length?e.className=r:e.removeAttribute(w)},commonAncestor:function(){var t,e,n,i,o,r=arguments.length,a=[],s=1/0,l=null;if(!r)return null;if(1==r)return arguments[0];for(t=0;r>t;t++){for(e=[],n=arguments[t];n;)e.push(n),n=n.parentNode;a.push(e.reverse()),s=Math.min(s,e.length)}if(1==r)return a[0][0];for(t=0;s>t;t++){for(i=a[0][t],o=1;r>o;o++)if(i!=a[o][t])return l;l=i}return l},closestSplittableParent:function(e){var n,i,o;return n=1==e.length?d.parentOfType(e[0],["ul","ol"]):d.commonAncestor.apply(null,e),n||(n=d.parentOfType(e[0],["p","td"])||e[0].ownerDocument.body),d.isInline(n)&&(n=d.blockParentOrBody(n)),i=f(e,d.editableParent),o=d.commonAncestor(i)[0],t.contains(n,o)&&(n=o),n},closestEditable:function(e,n){var i=d.parentOfType(e,n),o=d.editableParent(e);return i&&o&&t.contains(i,o)?i=o:!i&&o&&(i=o),i},closestEditableOfType:function(t,e){var n=d.closestEditable(t,e);return n&&d.ofType(n,e)?n:void 0},filter:function(t,e,n){for(var i,o=0,r=e.length,a=[];r>o;o++)i=d.name(e[o]),(!n&&i==t||n&&i!=t)&&a.push(e[o]);return a},ensureTrailingBreaks:function(e){var n=t(e).find("p,td,th"),i=n.length,o=0;if(i)for(;i>o;o++)d.ensureTrailingBreak(n[o]);else d.ensureTrailingBreak(e)},ensureTrailingBreak:function(t){var e,n=t.lastChild,i=n&&d.name(n);(!i||"br"!=i&&"img"!=i||"br"==i&&"k-br"!=n.className)&&(e=t.ownerDocument.createElement("br"),e.className="k-br",t.appendChild(e))}},u.ui.editor.Dom=d}(window.kendo.jQuery),function(t,e){var n,i,o=window.kendo,r=o.ui.editor,a=r.Dom,s=t.extend,l="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),c=/"/g,h=/<br[^>]*>/i,d=/^\d+(\.\d*)?(px)?$/i,u=/<p><\/p>/i,f=/([\w|\-]+)\s*:\s*([^;]+);?/i,p=/^sizzle-\d+/i,g=/^k-script-/i,m=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,v=document.createElement("div");v.innerHTML=" <hr>",n=3===v.firstChild.nodeType,v=null,i={toEditableHtml:function(t){var e='<br class="k-br">';return t=t||"",t.replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->").replace(/<script([^>]*)>(.*)?<\/script>/gi,"<telerik:script$1>$2</telerik:script>").replace(/<img([^>]*)>/gi,function(t){return t.replace(m,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,e+"<$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+e)},_fillEmptyElements:function(e){t(e).find("p").each(function(){var e,n=t(this);if(/^\s*$/g.test(n.text())&&!n.find("img,input").length){for(e=this;e.firstChild&&3!=e.firstChild.nodeType;)e=e.firstChild;1!=e.nodeType||a.empty[a.name(e)]||(e.innerHTML=o.ui.editor.emptyElementContent)}})},_removeSystemElements:function(e){t(".k-paste-container",e).remove()},_resetOrderedLists:function(t){var e,n,i,o=t.getElementsByTagName("ol");for(e=0;o.length>e;e++)n=o[e],i=n.getAttribute("start"),n.setAttribute("start",1),i?n.setAttribute("start",i):n.removeAttribute(i)},_preventScriptExecution:function(e){t(e).find("*").each(function(){var t,e,n,i,o=this.attributes;for(e=0,n=o.length;n>e;e++)t=o[e],i=t.nodeName,t.specified&&/^on/i.test(i)&&(this.removeAttribute(i),this.setAttribute("k-script-"+i,t.nodeValue))})},htmlToDom:function(e,n){var r,s,l=o.support.browser,c=l.msie,h=c&&9>l.version;return e=i.toEditableHtml(e),h&&(e="<br/>"+e,r="originalsrc",s="originalhref",e=e.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,s+'="$1"'),e=e.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,r+'="$1"')),n.innerHTML=e,h?(a.remove(n.firstChild),t(n).find("telerik\\:script,script,link,img,a").each(function(){var t=this;t[s]&&(t.setAttribute("href",t[s]),t.removeAttribute(s)),t[r]&&(t.setAttribute("src",t[r]),t.removeAttribute(r))})):c&&(a.normalize(n),i._resetOrderedLists(n)),i._preventScriptExecution(n),i._fillEmptyElements(n),i._removeSystemElements(n),t("table",n).addClass("k-table"),n},domToXhtml:function(i,r){function s(e){var n,i,o,r,s=t.trim,l=s(e).split(";"),h=l.length;for(n=0,h=l.length;h>n;n++)l[n].length&&(i=f.exec(l[n]),i&&(o=s(i[1].toLowerCase()),r=s(i[2]),"font-size-adjust"!=o&&"font-stretch"!=o&&(o.indexOf("color")>=0?r=a.toHex(r):o.indexOf("font")>=0?r=r.replace(c,"'"):/\burl\(/g.test(r)&&(r=r.replace(c,"")),b.push(o),b.push(":"),b.push(r),b.push(";"))))}function m(n){var i,l,c,h,u,f,m,v,_,y=[],w=n.attributes;for(a.is(n,"img")&&(m=n.style.width,v=n.style.height,_=t(n),m&&d.test(m)&&(_.attr("width",parseInt(m,10)),a.unstyle(n,{width:e})),v&&d.test(v)&&(_.attr("height",parseInt(v,10)),a.unstyle(n,{height:e}))),l=0,c=w.length;c>l;l++)i=w[l],h=i.nodeName,u=i.nodeValue,f=i.specified,"value"==h&&"value"in n&&n.value?f=!0:"type"==h&&"text"==u?f=!0:"class"!=h||u?p.test(h)?f=!1:"complete"==h?f=!1:"altHtml"==h?f=!1:"start"==h&&(a.is(n,"ul")||a.is(n,"ol"))?f=!1:h.indexOf("_moz")>=0?f=!1:g.test(h)&&(f=!!r.scripts):f=!1,f&&y.push(i);if(y.length)for(y.sort(function(t,e){return t.nodeName>e.nodeName?1:e.nodeName>t.nodeName?-1:0}),l=0,c=y.length;c>l;l++)i=y[l],h=i.nodeName,u=i.nodeValue,("class"!=h||"k-table"!=u)&&(h=h.replace(g,""),b.push(" "),b.push(h),b.push('="'),"style"==h?s(u||n.style.cssText):b.push("src"==h||"href"==h?o.htmlEncode(n.getAttribute(h,2)):a.fillAttrs[h]?h:u),b.push('"'))}function v(t,e,n){for(var i=t.firstChild;i;i=i.nextSibling)y(i,e,n)}function _(t){return t.nodeValue.replace(/\ufeff/g,"")}function y(t,i,o){var s,l,c,h,d,u=t.nodeType;if(1==u){if(s=a.name(t),!s||a.insignificant(t))return;if(a.isInline(t)&&1==t.childNodes.length&&3==t.firstChild.nodeType&&!_(t.firstChild))return;if(!r.scripts&&"telerik:script"==s)return;if(l=x[s])return l.start(t),v(t,!1,l.skipEncoding),l.end(t),e;b.push("<"),b.push(s),m(t),a.empty[s]?b.push(" />"):(b.push(">"),v(t,i||a.is(t,"pre")),b.push("</"),b.push(s),b.push(">"))}else 3==u?(h=_(t),!i&&n&&(c=t.parentNode,d=t.previousSibling,d||(d=(a.isInline(c)?c:t).previousSibling),(!d||""===d.innerHTML||a.isBlock(d))&&(h=h.replace(/^[\r\n\v\f\t ]+/,"")),h=h.replace(/ +/," ")),b.push(o?h:a.encode(h,r))):4==u?(b.push("<![CDATA["),b.push(t.data),b.push("]]>")):8==u&&(t.data.indexOf("[CDATA[")<0?(b.push("<!--"),b.push(t.data),b.push("-->")):(b.push("<!"),b.push(t.data),b.push(">")))
}function w(t){var e=t.childNodes.length,n=e&&3==t.firstChild.nodeType;return n&&(1==e||2==e&&a.insignificant(t.lastChild))}var b=[],x={"telerik:script":{start:function(t){b.push("<script"),m(t),b.push(">")},end:function(){b.push("</script>")},skipEncoding:!0},b:{start:function(){b.push("<strong>")},end:function(){b.push("</strong>")}},i:{start:function(){b.push("<em>")},end:function(){b.push("</em>")}},u:{start:function(){b.push('<span style="text-decoration:underline;">')},end:function(){b.push("</span>")}},iframe:{start:function(t){b.push("<iframe"),m(t),b.push(">")},end:function(){b.push("</iframe>")}},font:{start:function(t){var e,n,i;b.push('<span style="'),e=t.getAttribute("color"),n=l[t.getAttribute("size")],i=t.getAttribute("face"),e&&(b.push("color:"),b.push(a.toHex(e)),b.push(";")),i&&(b.push("font-face:"),b.push(i),b.push(";")),n&&(b.push("font-size:"),b.push(n),b.push(";")),b.push('">')},end:function(){b.push("</span>")}}};return r=r||{},w(i)?a.encode(_(i.firstChild).replace(/[\r\n\v\f\t ]+/," "),r):(v(i),b=b.join(""),""===b.replace(h,"").replace(u,"")?"":b)}},s(r,{Serializer:i})}(window.kendo.jQuery),function(t){function e(t,e,n,i){var o,r,a,s;if(t==e)return i-n;for(o=e;o&&o.parentNode!=t;)o=o.parentNode;if(o)return f(o)-n;for(o=t;o&&o.parentNode!=e;)o=o.parentNode;if(o)return i-f(o)-1;for(r=u.commonAncestor(t,e),a=t;a&&a.parentNode!=r;)a=a.parentNode;for(a||(a=r),s=e;s&&s.parentNode!=r;)s=s.parentNode;return s||(s=r),a==s?0:f(s)-f(a)}function n(t,n){function i(t){try{return e(t.startContainer,t.endContainer,t.startOffset,t.endOffset)<0}catch(n){return!0}}i(t)&&(n?(t.commonAncestorContainer=t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.commonAncestorContainer=t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0)}function i(t){t.collapsed=t.startContainer==t.endContainer&&t.startOffset==t.endOffset;for(var e=t.startContainer;e&&e!=t.endContainer&&!u.isAncestorOf(e,t.endContainer);)e=e.parentNode;t.commonAncestorContainer=e}function o(t){var e=t.duplicate(),n=t.duplicate();return e.collapse(!0),n.collapse(!1),u.commonAncestor(t.parentElement(),e.parentElement(),n.parentElement())}function r(t,e,n){var i,o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"],a=0,s=p(o),l=s?o:o.childNodes[r]||null,c=s?o.parentNode:o,h=e.ownerDocument,d=h.body.createTextRange();(3==o.nodeType||4==o.nodeType)&&(a=r),c||(c=h.body),"img"==c.nodeName.toLowerCase()?(d.moveToElementText(c),d.collapse(!1),t.setEndPoint(n?"StartToStart":"EndToStart",d)):(i=c.insertBefore(u.create(h,"a"),l),d.moveToElementText(i),u.remove(i),d[n?"moveStart":"moveEnd"]("character",a),d.collapse(!1),t.setEndPoint(n?"StartToStart":"EndToStart",d))}function a(t,e,n,i){var o,r,a,s,l,c,h,d=u.create(e.ownerDocument,"a"),g=t.duplicate(),m=i?"StartToStart":"StartToEnd",v=!1;d.innerHTML="ï»¿",g.collapse(i),r=g.parentElement(),u.isAncestorOrSelf(n,r)||(r=n);do v?r.insertBefore(d,d.previousSibling):(r.appendChild(d),v=!0),g.moveToElementText(d);while((o=g.compareEndPoints(m,t))>0&&d.previousSibling);a=d.nextSibling,-1==o&&p(a)?(g.setEndPoint(i?"EndToStart":"EndToEnd",t),u.remove(d),c=[a,g.text.length]):(s=!i&&d.previousSibling,l=i&&d.nextSibling,p(l)?c=[l,0]:p(s)?c=[s,s.length]:(h=f(d),c=r.nextSibling&&h==r.childNodes.length-1?[r.nextSibling,0]:[r,h]),u.remove(d)),e[i?"setStart":"setEnd"].apply(e,c)}var s=window.kendo,l=s.Class,c=t.extend,h=s.ui.editor,d=s.support.browser,u=h.Dom,f=u.findNodeIndex,p=u.isDataNode,g=u.findClosestAncestor,m=u.getNodeLength,v=u.normalize,_={selectionFromWindow:function(t){return"getSelection"in t?t.getSelection():new b(t.document)},selectionFromRange:function(t){var e=T.documentFromRange(t);return _.selectionFromDocument(e)},selectionFromDocument:function(t){return _.selectionFromWindow(u.windowFromDocument(t))}},y=l.extend({init:function(e){t.extend(this,{ownerDocument:e,startContainer:e,endContainer:e,commonAncestorContainer:e,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(t,e){this.startContainer=t,this.startOffset=e,i(this),n(this,!0)},setEnd:function(t,e){this.endContainer=t,this.endOffset=e,i(this),n(this,!1)},setStartBefore:function(t){this.setStart(t.parentNode,f(t))},setStartAfter:function(t){this.setStart(t.parentNode,f(t)+1)},setEndBefore:function(t){this.setEnd(t.parentNode,f(t))},setEndAfter:function(t){this.setEnd(t.parentNode,f(t)+1)},selectNode:function(t){this.setStartBefore(t),this.setEndAfter(t)},selectNodeContents:function(t){this.setStart(t,0),this.setEnd(t,t[1===t.nodeType?"childNodes":"nodeValue"].length)},collapse:function(t){var e=this;t?e.setEnd(e.startContainer,e.startOffset):e.setStart(e.endContainer,e.endOffset)},deleteContents:function(){var t=this,e=t.cloneRange();t.startContainer!=t.commonAncestorContainer&&t.setStartAfter(g(t.commonAncestorContainer,t.startContainer)),t.collapse(!0),function n(t){for(;t.next();)t.hasPartialSubtree()?n(t.getSubtreeIterator()):t.remove()}(new w(e))},cloneContents:function(){var t=T.documentFromRange(this);return function e(n){for(var i,o=t.createDocumentFragment();i=n.next();)i=i.cloneNode(!n.hasPartialSubtree()),n.hasPartialSubtree()&&i.appendChild(e(n.getSubtreeIterator())),o.appendChild(i);return o}(new w(this))},extractContents:function(){var t,e=this,n=e.cloneRange();return e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(g(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),t=T.documentFromRange(e),function i(n){for(var o,r=t.createDocumentFragment();o=n.next();)n.hasPartialSubtree()?(o=o.cloneNode(!1),o.appendChild(i(n.getSubtreeIterator()))):n.remove(e.originalRange),r.appendChild(o);return r}(new w(n))},insertNode:function(t){var e=this;p(e.startContainer)?(e.startOffset!=e.startContainer.nodeValue.length&&u.splitDataNode(e.startContainer,e.startOffset),u.insertAfter(t,e.startContainer)):u.insertAt(e.startContainer,t,e.startOffset),e.setStart(e.startContainer,e.startOffset)},cloneRange:function(){return t.extend(new y(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var t=this.startContainer.nodeName,e=this.endContainer.nodeName;return("#text"==t?this.startContainer.nodeValue:t)+"("+this.startOffset+") : "+("#text"==e?this.endContainer.nodeValue:e)+"("+this.endOffset+")"}}),w=l.extend({init:function(e){if(t.extend(this,{range:e,_current:null,_next:null,_end:null}),!e.collapsed){var n=e.commonAncestorContainer;this._next=e.startContainer!=n||p(e.startContainer)?g(n,e.startContainer):e.startContainer.childNodes[e.startOffset],this._end=e.endContainer!=n||p(e.endContainer)?g(n,e.endContainer).nextSibling:e.endContainer.childNodes[e.endOffset]}},hasNext:function(){return!!this._next},next:function(){var t=this,e=t._current=t._next;return t._next=t._current&&t._current.nextSibling!=t._end?t._current.nextSibling:null,p(t._current)&&(t.range.endContainer==t._current&&(e=e.cloneNode(!0),e.deleteData(t.range.endOffset,e.length-t.range.endOffset)),t.range.startContainer==t._current&&(e=e.cloneNode(!0),e.deleteData(0,t.range.startOffset))),e},traverse:function(t){function e(){return i._current=i._next,i._next=i._current&&i._current.nextSibling!=i._end?i._current.nextSibling:null,i._current}for(var n,i=this;n=e();)i.hasPartialSubtree()?i.getSubtreeIterator().traverse(t):t(n);return n},remove:function(t){var e,n,i,o,r,a=this,s=a.range.startContainer==a._current,l=a.range.endContainer==a._current;p(a._current)&&(s||l)?(e=s?a.range.startOffset:0,n=l?a.range.endOffset:a._current.length,i=n-e,t&&(s||l)&&(a._current==t.startContainer&&t.startOffset>=e&&(t.startOffset-=i),a._current==t.endContainer&&t.endOffset>=n&&(t.endOffset-=i)),a._current.deleteData(e,i)):(o=a._current.parentNode,!t||a.range.startContainer!=o&&a.range.endContainer!=o||(r=f(a._current),o==t.startContainer&&t.startOffset>=r&&(t.startOffset-=1),o==t.endContainer&&t.endOffset>r&&(t.endOffset-=1)),u.remove(a._current))},hasPartialSubtree:function(){return!p(this._current)&&(u.isAncestorOrSelf(this._current,this.range.startContainer)||u.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var t=this,e=t.range.cloneRange();return e.selectNodeContents(t._current),u.isAncestorOrSelf(t._current,t.range.startContainer)&&e.setStart(t.range.startContainer,t.range.startOffset),u.isAncestorOrSelf(t._current,t.range.endContainer)&&e.setEnd(t.range.endContainer,t.range.endOffset),new w(e)}}),b=l.extend({init:function(t){this.ownerDocument=t,this.rangeCount=1},addRange:function(t){var e=this.ownerDocument.body.createTextRange();r(e,t,!1),r(e,t,!0),e.select()},removeAllRanges:function(){var t=this.ownerDocument.selection;"None"!=t.type&&t.empty()},getRangeAt:function(){var t,e,n,i,r,s,l,c,h=new y(this.ownerDocument),d=this.ownerDocument.selection;try{if(t=d.createRange(),e=t.item?t.item(0):t.parentElement(),e.ownerDocument!=this.ownerDocument)return h}catch(u){return h}if("Control"==d.type)h.selectNode(t.item(0));else if(n=o(t),a(t,h,n,!0),a(t,h,n,!1),9==h.startContainer.nodeType&&h.setStart(h.endContainer,h.startOffset),9==h.endContainer.nodeType&&h.setEnd(h.startContainer,h.endOffset),0===t.compareEndPoints("StartToEnd",t)&&h.collapse(!1),i=h.startContainer,r=h.endContainer,s=this.ownerDocument.body,!(h.collapsed||0!==h.startOffset||h.endOffset!=m(h.endContainer)||i==r&&p(i)&&i.parentNode==s)){for(l=!1,c=!1;0===f(i)&&i==i.parentNode.firstChild&&i!=s;)i=i.parentNode,l=!0;for(;f(r)==m(r.parentNode)-1&&r==r.parentNode.lastChild&&r!=s;)r=r.parentNode,c=!0;i==s&&r==s&&l&&c&&(h.setStart(i,0),h.setEnd(r,m(s)))}return h}}),x=l.extend({init:function(t){this.enumerate=function(){function e(t){if(u.is(t,"img")||3==t.nodeType&&(!u.isWhitespace(t)||"ï»¿"==t.nodeValue))n.push(t);else for(t=t.firstChild;t;)e(t),t=t.nextSibling}var n=[];return new w(t).traverse(e),n}}}),k=l.extend({init:function(t,e){var n=this;n.range=t,n.rootNode=T.documentFromRange(t),n.body=e||n.getEditable(t),"body"!=u.name(n.body)&&(n.rootNode=n.body),n.html=n.body.innerHTML,n.startContainer=n.nodeToPath(t.startContainer),n.endContainer=n.nodeToPath(t.endContainer),n.startOffset=n.offset(t.startContainer,t.startOffset),n.endOffset=n.offset(t.endContainer,t.endOffset)},index:function(t){for(var e,n=0,i=t.nodeType;t=t.previousSibling;)e=t.nodeType,(3!=e||i!=e)&&n++,i=e;return n},getEditable:function(t){for(var e=t.commonAncestorContainer;e&&(3==e.nodeType||e.attributes&&!e.attributes.contentEditable);)e=e.parentNode;return e},restoreHtml:function(){this.body.innerHTML=this.html},offset:function(t,e){if(3==t.nodeType)for(;(t=t.previousSibling)&&3==t.nodeType;)e+=t.nodeValue.length;return e},nodeToPath:function(t){for(var e=[];t!=this.rootNode;)e.push(this.index(t)),t=t.parentNode;return e},toRangePoint:function(t,e,n,i){for(var o=this.rootNode,r=n.length,a=i;r--;)o=o.childNodes[n[r]];for(;o&&3==o.nodeType&&a>o.nodeValue.length;)a-=o.nodeValue.length,o=o.nextSibling;o&&a>=0&&t[e?"setStart":"setEnd"](o,a)},toRange:function(){var t=this,e=t.range.cloneRange();return t.toRangePoint(e,!0,t.startContainer,t.startOffset),t.toRangePoint(e,!1,t.endContainer,t.endOffset),e}}),C=l.extend({init:function(){this.caret=null},addCaret:function(t){var e=this;return e.caret=u.create(T.documentFromRange(t),"span",{className:"k-marker"}),t.insertNode(e.caret),t.selectNode(e.caret),e.caret},removeCaret:function(t){var e,n,i,o,r=this,a=r.caret.previousSibling,s=0;a&&(s=p(a)?a.nodeValue.length:f(a)),e=r.caret.parentNode,n=a?f(a):0,u.remove(r.caret),v(e),i=e.childNodes[n],p(i)?t.setStart(i,s):i?(o=u.lastTextNode(i),o?t.setStart(o,o.nodeValue.length):t[a?"setStartAfter":"setStartBefore"](i)):(d.msie||e.innerHTML||(e.innerHTML='<br _moz_dirty="" />'),t.selectNodeContents(e)),t.collapse(!0)},add:function(t,e){var n,i,o=this,r=t.collapsed&&!T.isExpandable(t),a=T.documentFromRange(t);return e&&t.collapsed&&(o.addCaret(t),t=T.expand(t)),n=t.cloneRange(),n.collapse(!1),o.end=u.create(a,"span",{className:"k-marker"}),n.insertNode(o.end),n=t.cloneRange(),n.collapse(!0),o.start=o.end.cloneNode(!0),n.insertNode(o.start),o._removeDeadMarkers(o.start,o.end),r&&(i=a.createTextNode("ï»¿"),u.insertAfter(i.cloneNode(),o.start),u.insertBefore(i,o.end)),t.setStartBefore(o.start),t.setEndAfter(o.end),v(t.commonAncestorContainer),t},_removeDeadMarkers:function(t,e){t.previousSibling&&"ï»¿"==t.previousSibling.nodeValue&&u.remove(t.previousSibling),e.nextSibling&&"ï»¿"==e.nextSibling.nodeValue&&u.remove(e.nextSibling)},remove:function(t){var e,n,i,o,r,a,s,l,c,h,d,g,m,_=this,y=_.start,w=_.end;for(v(t.commonAncestorContainer);!y.nextSibling&&y.parentNode;)y=y.parentNode;for(;!w.previousSibling&&w.parentNode;)w=w.parentNode;if(e=y.previousSibling&&3==y.previousSibling.nodeType&&y.nextSibling&&3==y.nextSibling.nodeType,n=w.previousSibling&&3==w.previousSibling.nodeType&&w.nextSibling&&3==w.nextSibling.nodeType,i=e&&n,y=y.nextSibling,w=w.previousSibling,o=!1,r=!1,y==_.end&&(r=!!_.start.previousSibling,y=w=_.start.previousSibling||_.end.nextSibling,o=!0),u.remove(_.start),u.remove(_.end),!y||!w)return t.selectNodeContents(t.commonAncestorContainer),void t.collapse(!0);if(a=o?p(y)?y.nodeValue.length:y.childNodes.length:0,s=p(w)?w.nodeValue.length:w.childNodes.length,3==y.nodeType)for(;y.previousSibling&&3==y.previousSibling.nodeType;)y=y.previousSibling,a+=y.nodeValue.length;if(3==w.nodeType)for(;w.previousSibling&&3==w.previousSibling.nodeType;)w=w.previousSibling,s+=w.nodeValue.length;for(l=f(y),c=y.parentNode,h=f(w),d=w.parentNode,g=y;g.previousSibling;g=g.previousSibling)3==g.nodeType&&3==g.previousSibling.nodeType&&l--;for(m=w;m.previousSibling;m=m.previousSibling)3==m.nodeType&&3==m.previousSibling.nodeType&&h--;v(c),3==y.nodeType&&(y=c.childNodes[l]),v(d),3==w.nodeType&&(w=d.childNodes[h]),o?(3==y.nodeType?t.setStart(y,a):t[r?"setStartAfter":"setStartBefore"](y),t.collapse(!0)):(3==y.nodeType?t.setStart(y,a):t.setStartBefore(y),3==w.nodeType?t.setEnd(w,s):t.setEndAfter(w)),_.caret&&_.removeCaret(t)}}),S=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,T={nodes:function(t){var e=T.textNodes(t);return e.length||(t.selectNodeContents(t.commonAncestorContainer),e=T.textNodes(t),e.length||(e=u.significantChildNodes(t.commonAncestorContainer))),e},textNodes:function(t){return new x(t).enumerate()},documentFromRange:function(t){var e=t.startContainer;return 9==e.nodeType?e:e.ownerDocument},createRange:function(t){return d.msie&&9>d.version?new y(t):t.createRange()},selectRange:function(t){var e,n=T.image(t);n&&(t.setStartAfter(n),t.setEndAfter(n)),e=_.selectionFromRange(t),e.removeAllRanges(),e.addRange(t)},stringify:function(t){return s.format("{0}:{1} - {2}:{3}",u.name(t.startContainer),t.startOffset,u.name(t.endContainer),t.endOffset)},split:function(t,e,n){function i(i){var o,r=t.cloneRange();r.collapse(i),r[i?"setStartBefore":"setEndAfter"](e),o=r.extractContents(),n&&(o=u.trim(o)),u[i?"insertBefore":"insertAfter"](o,e)}i(!0),i(!1)},mapAll:function(e,n){var i=[];return new w(e).traverse(function(e){var o=n(e);o&&t.inArray(o,i)<0&&i.push(o)}),i},getAll:function(t,e){var n=e;return"string"==typeof e&&(e=function(t){return u.is(t,n)}),T.mapAll(t,function(t){return e(t)?t:void 0})},getMarkers:function(t){return T.getAll(t,function(t){return"k-marker"==t.className})},image:function(t){var e=T.getAll(t,"img");return 1==e.length?e[0]:void 0},wrapSelectedElements:function(t){function e(t,e){var n,i=u.getNodeLength(e);if(t==i)return!0;for(n=t;i>n;n++)if(!u.insignificant(e.childNodes[n]))return!1;return!0}for(var n=u.editableParent(t.startContainer),i=u.editableParent(t.endContainer);0===t.startOffset&&t.startContainer!=n;)t.setStart(t.startContainer.parentNode,u.findNodeIndex(t.startContainer));for(;e(t.endOffset,t.endContainer)&&t.endContainer!=i;)t.setEnd(t.endContainer.parentNode,u.findNodeIndex(t.endContainer)+1);return t},expand:function(t){var e,n,i,o,r=t.cloneRange(),a=r.startContainer.childNodes[0===r.startOffset?0:r.startOffset-1],s=r.endContainer.childNodes[r.endOffset];return p(a)&&p(s)?(e=a.nodeValue,n=s.nodeValue,e&&n?(i=e.split("").reverse().join("").search(S),o=n.search(S),i&&o?(o=-1==o?n.length:o,i=-1==i?0:e.length-i,r.setStart(a,i),r.setEnd(s,o),r):r):r):r},isExpandable:function(t){var e,n,i,o,r,a,s=t.startContainer,l=T.documentFromRange(t);return s==l||s==l.body?!1:(e=t.cloneRange(),(n=s.nodeValue)?(i=n.substring(0,e.startOffset),o=n.substring(e.startOffset),r=0,a=0,i&&(r=i.split("").reverse().join("").search(S)),o&&(a=o.search(S)),r&&a):!1)}};c(h,{SelectionUtils:_,W3CRange:y,RangeIterator:w,W3CSelection:b,RangeEnumerator:x,RestorePoint:k,Marker:C,RangeUtils:T})}(window.kendo.jQuery),function(t){function e(t,e){var n=t.selectionRestorePoint=new h(t.getRange()),i=new p(e,n);return i.editor=t,t.undoRedoStack.push(i),n}var n=window.kendo,i=n.Class,o=n.ui.editor,r=o.EditorUtils,a=r.registerTool,s=o.Dom,l=o.Tool,c=o.ToolTemplate,h=o.RestorePoint,d=o.Marker,u=t.extend,f=i.extend({init:function(t){this.options=t,this.restorePoint=new h(t.range),this.marker=new d,this.formatter=t.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(t){return this.marker.add(this.getRange(),t)},releaseRange:function(t){this.marker.remove(t),this.editor.selectRange(t)},undo:function(){var t=this.restorePoint;t.restoreHtml(),this.editor.selectRange(t.toRange())},redo:function(){this.exec()},createDialog:function(e,i){var o=this.editor;return t(e).appendTo(document.body).kendoWindow(u({},o.options.dialogOptions,i)).closest(".k-window").toggleClass("k-rtl",n.support.isRtl(o.wrapper)).end()},exec:function(){var t=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(t),this.releaseRange(t)}}),p=i.extend({init:function(t,e){this.body=t.body,this.startRestorePoint=t,this.endRestorePoint=e},redo:function(){this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}}),g=f.extend({init:function(t){f.fn.init.call(this,t),this.managesUndoRedo=!0},exec:function(){var t,e=this.editor,n=this.options,i=n.range,o=e.body,r=new h(i,o),a=n.html||n.value||"";e.selectRange(i),e.clipboard.paste(a,n),n.postProcess&&n.postProcess(e,e.getRange()),t=new p(r,new h(e.getRange(),o)),t.editor=e,e.undoRedoStack.push(t),e.focus()}}),m=l.extend({initialize:function(t,e){var n=e.editor,i=this.options,r=i.items?i.items:n.options.insertHtml;new o.SelectBox(t,{dataSource:r,dataTextField:"text",dataValueField:"value",change:function(){l.exec(n,"insertHtml",this.value())},title:n.options.messages.insertHtml,highlightFirst:!1})},command:function(t){return new g(t)},update:function(t){var e=t.data("kendoSelectBox")||t.find("select").data("kendoSelectBox");e.close(),e.value(e.options.title)}}),v=i.extend({init:function(){this.stack=[],this.currentCommandIndex=-1},push:function(t){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(t)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),_=i.extend({init:function(t){this.editor=t},keydown:function(n){var i,o=this,r=o.editor,a=r.keyboard,s=a.isTypingKey(n),l=u(t.Event(),n);return o.editor.trigger("keydown",l),l.isDefaultPrevented()?(n.preventDefault(),!0):l.isDefaultPrevented()||!s||a.isTypingInProgress()?!1:(i=r.getRange(),o.startRestorePoint=new h(i),a.startTyping(function(){o.endRestorePoint=e(r,o.startRestorePoint)}),!0)},keyup:function(t){var e=this.editor.keyboard;return this.editor.trigger("keyup",t),e.isTypingInProgress()?(e.endTyping(),!0):!1}}),y=i.extend({init:function(t){this.editor=t},keydown:function(t){var i,o,r,a,l;if(t.keyCode===n.keys.BACKSPACE){if(i=this.editor,o=i.getRange(),r=n.support.browser.msie?"":'<br _moz_dirty="" />',o.collapsed)return;t.preventDefault(),a=new h(o),l=o.commonAncestorContainer,/t(able|body|r)/i.test(s.name(l))&&o.selectNode(s.closest(l,"table")),o.deleteContents(),l=o.commonAncestorContainer,"p"===s.name(l)&&""===l.innerHTML&&(l.innerHTML=r,o.setStart(l,0),o.collapse(!0),i.selectRange(o)),e(i,a)}},keyup:function(){}}),w=i.extend({init:function(t){this.editor=t,this.systemCommandIsInProgress=!1},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=e(this.editor,this.startRestorePoint)},changed:function(){return this.startRestorePoint?this.startRestorePoint.html!=this.editor.body.innerHTML:!1},keydown:function(t){var e=this,n=e.editor,i=n.keyboard;return i.isModifierKey(t)?(i.isTypingInProgress()&&i.endTyping(!0),e.startRestorePoint=new h(n.getRange()),!0):i.isSystem(t)?(e.systemCommandIsInProgress=!0,e.changed()&&(e.systemCommandIsInProgress=!1,e.createUndoCommand()),!0):!1},keyup:function(){var t=this;return t.systemCommandIsInProgress&&t.changed()?(t.systemCommandIsInProgress=!1,t.createUndoCommand(),!0):!1}}),b=i.extend({init:function(t){this.handlers=t,this.typingInProgress=!1},isCharacter:function(t){return t>=48&&90>=t||t>=96&&111>=t||t>=186&&192>=t||t>=219&&222>=t||229==t},toolFromShortcut:function(e,n){var i,o,r=String.fromCharCode(n.keyCode);for(i in e)if(o=t.extend({ctrl:!1,alt:!1,shift:!1},e[i].options),(o.key==r||o.key==n.keyCode)&&o.ctrl==n.ctrlKey&&o.alt==n.altKey&&o.shift==n.shiftKey)return i},isTypingKey:function(t){var e=t.keyCode;return this.isCharacter(e)&&!t.ctrlKey&&!t.altKey||32==e||13==e||8==e||46==e&&!t.shiftKey&&!t.ctrlKey&&!t.altKey},isModifierKey:function(t){var e=t.keyCode;return 17==e&&!t.shiftKey&&!t.altKey||16==e&&!t.ctrlKey&&!t.altKey||18==e&&!t.ctrlKey&&!t.shiftKey},isSystem:function(t){return 46==t.keyCode&&t.ctrlKey&&!t.altKey&&!t.shiftKey},startTyping:function(t){this.onEndTyping=t,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress&&this.onEndTyping&&this.onEndTyping(),this.typingInProgress=!1},endTyping:function(e){var n=this;n.clearTimeout(),e?n.stopTyping():n.timeout=window.setTimeout(t.proxy(n.stopTyping,n),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(t,e){var n,i=this.handlers;for(n=0;i.length>n&&!i[n][e](t);n++);},keydown:function(t){this.notify(t,"keydown")},keyup:function(t){this.notify(t,"keyup")}}),x=i.extend({init:function(t){this.editor=t,this.cleaners=[new C,new S,new T]},htmlToFragment:function(t){var e=this.editor,n=e.document,i=s.create(n,"div"),o=n.createDocumentFragment();for(i.innerHTML=t;i.firstChild;)o.appendChild(i.firstChild);return o},isBlock:function(t){return/<(div|p|ul|ol|table|h[1-6])/i.test(t)},_startModification:function(){var t,e,n=this.editor;if(!this._inProgress)return this._inProgress=!0,t=n.getRange(),e=new h(t),s.persistScrollTop(n.document),{range:t,restorePoint:e}},_endModification:function(t){e(this.editor,t.restorePoint),this.editor._selectionChange(),this._inProgress=!1},_contentModification:function(t,e){var n=this,i=n.editor,o=n._startModification();o&&(t.call(n,i,o.range),setTimeout(function(){e.call(n,i,o.range),n._endModification(o)}))},oncut:function(){this._contentModification(t.noop,t.noop)},_fileToDataURL:function(e,n){var i=e.getAsFile(),o=new FileReader;o.onload=n||t.noop,o.readAsDataURL(i)},_triggerPaste:function(t,e){var n={html:t||""};n.html=n.html.replace(/\ufeff/g,""),this.editor.trigger("paste",n),this.paste(n.html,e||{})},_handleImagePaste:function(t){var e,n,i,o;if("FileReader"in window&&(e=this,n=t.clipboardData||t.originalEvent.clipboardData,i=n&&(n.items||n.files),i&&i.length&&/^image\//i.test(i[0].type)&&(o=e._startModification())))return this._fileToDataURL(i[0],function(t){e._triggerPaste('<img src="'+t.target.result+'" />'),e._endModification(o)}),!0},onpaste:function(e){this._handleImagePaste(e)||this._contentModification(function(i,o){var r,a,l,c=s.create(i.document,"div",{className:"k-paste-container",innerHTML:"ï»¿"}),h=n.support.browser;i.body.appendChild(c),h.msie&&11>h.version?(e.preventDefault(),r=i.createRange(),r.selectNodeContents(c),i.selectRange(r),a=i.document.body.createTextRange(),a.moveToElementText(c),t(i.body).unbind("paste"),a.execCommand("Paste"),t(i.body).bind("paste",t.proxy(this.onpaste,this))):(l=i.createRange(),l.selectNodeContents(c),i.selectRange(l)),o.deleteContents()},function(e,n){var i,o="";e.selectRange(n),i=t(e.body).children(".k-paste-container"),i.each(function(){var t=this.lastChild;t&&s.is(t,"br")&&s.remove(t),o+=this.innerHTML}),i.remove(),this._triggerPaste(o,{clean:!0})})},splittableParent:function(t,e){var n,i;if(t)return s.closestEditableOfType(e,["p","ul","ol"])||e.parentNode;if(n=e.parentNode,i=e.ownerDocument.body,s.isInline(n))for(;n.parentNode!=i&&!s.isBlock(n.parentNode);)n=n.parentNode;return n},paste:function(e,n){var i,r,a,l,c,h,f,p,g,m,v,_=this.editor;for(n=u({clean:!1,split:!0},n),i=0,r=this.cleaners.length;r>i;i++)this.cleaners[i].applicable(e)&&(e=this.cleaners[i].clean(e));if(n.clean&&(e=e.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3"),e=e.replace(/<(a|span)[^>]*><\/\1>/gi,"")),e=e.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>"),a=this.isBlock(e),_.focus(),l=_.getRange(),l.deleteContents(),l.startContainer==_.document&&l.selectNodeContents(_.body),c=new d,h=c.addCaret(l),f=this.splittableParent(a,h),p=!1,g=f!=_.body&&!s.is(f,"td"),n.split&&g&&(a||s.isInline(f))&&(l.selectNode(h),o.RangeUtils.split(l,f,!0),p=!0),m=this.htmlToFragment(e),m.firstChild&&"k-paste-container"===m.firstChild.className){for(v=[],i=0,r=m.childNodes.length;r>i;i++)v.push(m.childNodes[i].innerHTML);m=this.htmlToFragment(v.join("<br />"))}if(t(m.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"),l.insertNode(m),f=this.splittableParent(a,h),p){for(;h.parentNode!=f;)s.unwrap(h.parentNode);s.unwrap(h.parentNode)}s.normalize(l.commonAncestorContainer),h.style.display="inline",s.restoreScrollTop(_.document),s.scrollTo(h),c.removeCaret(l),_.selectRange(l)}}),k=i.extend({clean:function(t){var e,n,i=this,o=i.replacements;for(e=0,n=o.length;n>e;e+=2)t=t.replace(o[e],o[e+1]);return t}}),C=k.extend({init:function(){this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(t){return/<script[^>]*>/i.test(t)}}),S=k.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,"",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(t,e){return e?t:" "}]},applicable:function(t){return/class="?Mso|style="[^"]*mso-/i.test(t)||/urn:schemas-microsoft-com:office/.test(t)},stripEmptyAnchors:function(t){return t.replace(/<a([^>]*)>\s*<\/a>/gi,function(t,e){return!e||e.indexOf("href")<0?"":t})},listType:function(t){var e;return/^(<span [^>]*texhtml[^>]*>)?<span [^>]*(Symbol|Wingdings)[^>]*>/i.test(t)&&(e=!0),t=t.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,"Â "),!e&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(t)||e&&/^.\u00a0+/.test(t)?"ul":/^\s*\w+[\.\)]\u00a0{2,}/.test(t)?"ol":void 0},_convertToLi:function(t){var e;return 1==t.childNodes.length?e=t.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(s.remove(t.firstChild),3==t.firstChild.nodeType&&/^[ivx]+\.$/i.test(t.firstChild.nodeValue)&&s.remove(t.firstChild),/^(&nbsp;|\s)+$/i.test(t.firstChild.innerHTML)&&s.remove(t.firstChild),e=t.innerHTML),s.remove(t),s.create(document,"li",{innerHTML:e})},lists:function(e){var n,i,o,r,a,l,c,h,d,u=t(s.blockElements.join(","),e),f=-1,p={ul:{},ol:{}},g=e;for(o=0;u.length>o;o++)if(r=u[o],a=this.listType(r.innerHTML),i=s.name(r),"td"!=i)if(a&&"p"==i){if(l=parseFloat(r.style.marginLeft||0),c=p[a][l],(l>f||!c)&&(c=s.create(document,a),g==e?s.insertBefore(c,r):g.appendChild(c),p[a][l]=c),n!=a)for(h in p)for(d in p[h])t.contains(c,p[h][d])&&delete p[h][d];g=this._convertToLi(r),c.appendChild(g),f=l,n=a}else r.innerHTML?(p={ul:{},ol:{}},g=e,f=-1):s.remove(r)},removeAttributes:function(t){for(var e=t.attributes,n=e.length;n--;)"colspan"!=s.name(e[n])&&t.removeAttributeNode(e[n])},createColGroup:function(e){var i=e.cells,o=t(e).closest("table"),r=o.children("colgroup");2>i.length||(r.length&&(i=r.children(),r[0].parentNode.removeChild(r[0])),r=t(t.map(i,function(t){var e=t.width;return e&&0!==parseInt(e,10)?n.format('<col style="width:{0}px;"/>',e):"<col />"}).join("")),r.is("colgroup")||(r=t("<colgroup/>").append(r)),r.prependTo(o))},convertHeaders:function(e){var n,i=e.cells,o=t.map(i,function(e){var n=t(e).children("p").children("strong")[0];return n&&"strong"==s.name(n)?n:void 0});if(o.length==i.length){for(n=0;o.length>n;n++)s.unwrap(o[n]);for(t(e).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(e),n=0;i.length>n;n++)s.changeTag(i[n],"th")}},removeParagraphs:function(e){var n,i,o,r,a;for(n=0;e.length>n;n++)for(this.removeAttributes(e[n]),r=t(e[n]),a=r.children("p"),i=0,o=a.length;o>i;i++)o-1>i&&s.insertAfter(s.create(document,"br"),a[i]),s.unwrap(a[i])},removeDefaultColors:function(t){for(var e=0;t.length>e;e++)/^\s*color:\s*[^;]*;?$/i.test(t[e].style.cssText)&&s.unwrap(t[e])},tables:function(e){var n,i,o,r,a,s=t(e).find("table"),l=this;for(r=0;s.length>r;r++){for(n=s[r].rows,o=i=n[0],a=1;n.length>a;a++)n[a].cells.length>o.cells.length&&(o=n[a]);l.createColGroup(o),l.convertHeaders(i),l.removeAttributes(s[r]),l.removeParagraphs(s.eq(r).find("td,th")),l.removeDefaultColors(s.eq(r).find("span"))}},headers:function(e){var n,i=t(e).find("p.MsoTitle");for(n=0;i.length>n;n++)s.changeTag(i[n],"h1")},clean:function(t){var e,n=this;return t=k.fn.clean.call(n,t),t=n.stripEmptyAnchors(t),e=s.create(document,"div",{innerHTML:t}),n.headers(e),n.lists(e),n.tables(e),t=e.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")}}),T=k.extend({init:function(){this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(t){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(t)}});u(o,{Command:f,GenericCommand:p,InsertHtmlCommand:g,InsertHtmlTool:m,UndoRedoStack:v,TypingHandler:_,SystemHandler:w,BackspaceHandler:y,Keyboard:b,Clipboard:x,Cleaner:k,MSWordFormatCleaner:S,WebkitFormatCleaner:T}),a("insertHtml",new m({template:new c({template:r.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}))}(window.kendo.jQuery),function(t){var e=window.kendo,n=e.Class,i=e.ui.editor,o=e.ui.Editor.fn.options.formats,r=i.EditorUtils,a=i.Tool,s=i.ToolTemplate,l=i.FormatTool,c=i.Dom,h=i.RangeUtils,d=t.extend,u=i.EditorUtils.registerTool,f=i.EditorUtils.registerFormat,p="k-marker",g=n.extend({init:function(t){this.format=t},numberOfSiblings:function(t){var e,n=0,i=0,o=0,r=t.parentNode;for(e=r.firstChild;e;e=e.nextSibling)e!=t&&(e.className==p?o++:3==e.nodeType?n++:i++);return o>1&&r.firstChild.className==p&&r.lastChild.className==p?0:i+n},findSuitable:function(t,e){return!e&&this.numberOfSiblings(t)>0?null:c.parentOfType(t,this.format[0].tags)},findFormat:function(t){var e,n,i,o,r,a=this.format,s=c.attrEquals;for(e=0,n=a.length;n>e;e++){if(i=t,o=a[e].tags,r=a[e].attr,i&&c.ofType(i,o)&&s(i,r))return i;
for(;i;)if(i=c.parentOfType(i,o),i&&s(i,r))return i}return null},isFormatted:function(t){var e,n;for(e=0,n=t.length;n>e;e++)if(this.findFormat(t[e]))return!0;return!1}}),m=n.extend({init:function(t,e){this.finder=new g(t),this.attributes=d({},t[0].attr,e),this.tag=t[0].tags[0]},wrap:function(t){return c.wrap(t,c.create(t.ownerDocument,this.tag,this.attributes))},activate:function(t,e){this.finder.isFormatted(e)?(this.split(t),this.remove(e)):this.apply(e)},toggle:function(t){var e=h.textNodes(t);e.length>0&&this.activate(t,e)},apply:function(t){var e,n,i,o,r=[];for(e=0,n=t.length;n>e;e++)i=t[e],o=this.finder.findSuitable(i),o?c.attr(o,this.attributes):o=this.wrap(i),r.push(o);this.consolidate(r)},remove:function(t){var e,n,i;for(e=0,n=t.length;n>e;e++)i=this.finder.findFormat(t[e]),i&&(this.attributes&&this.attributes.style?(c.unstyle(i,this.attributes.style),i.style.cssText||i.attributes["class"]||c.unwrap(i)):c.unwrap(i))},split:function(t){var e,n,i=h.textNodes(t),o=i.length;if(o>0)for(e=0;o>e;e++)n=this.finder.findFormat(i[e]),n&&h.split(t,n,!0)},consolidate:function(t){for(var e,n;t.length>1;)if(e=t.pop(),n=t[t.length-1],e.previousSibling&&e.previousSibling.className==p&&n.appendChild(e.previousSibling),e.tagName==n.tagName&&e.previousSibling==n&&e.style.cssText==n.style.cssText){for(;e.firstChild;)n.appendChild(e.firstChild);c.remove(e)}}}),v=g.extend({init:function(t,e){this.format=t,this.greedyProperty=e,g.fn.init.call(this,t)},getInlineCssValue:function(e){var n,i,o,r,a,s,l,h,d,u,f,p,g=e.attributes,m=t.trim;if(g)for(n=0,i=g.length;i>n;n++)if(o=g[n],r=o.nodeName,a=o.nodeValue,o.specified&&"style"==r)for(s=m(a||e.style.cssText).split(";"),h=0,d=s.length;d>h;h++)if(l=s[h],l.length){if(u=l.split(":"),f=m(u[0].toLowerCase()),p=m(u[1]),f!=this.greedyProperty)continue;return f.indexOf("color")>=0?c.toHex(p):p}},getFormatInner:function(e){var n,i,o,r=t(c.isDataNode(e)?e.parentNode:e),a=r.parentsUntil("[contentEditable]").addBack().toArray().reverse();for(n=0,i=a.length;i>n;n++)if(o="className"==this.greedyProperty?a[n].className:this.getInlineCssValue(a[n]))return o;return"inherit"},getFormat:function(t){var e,n,i=this.getFormatInner(t[0]);for(e=1,n=t.length;n>e;e++)if(i!=this.getFormatInner(t[e]))return"";return i},isFormatted:function(t){return""!==this.getFormat(t)}}),_=m.extend({init:function(t,n,i){m.fn.init.call(this,t,n),this.values=n,this.finder=new v(t,i),i&&(this.greedyProperty=e.toCamelCase(i))},activate:function(t,e){var n=this.greedyProperty,i="apply";this.split(t),n&&"inherit"==this.values.style[n]&&(i="remove"),this[i](e)}}),y=l.extend({init:function(t){l.fn.init.call(this,d(t,{finder:new g(t.format),formatter:function(){return new m(t.format)}}))}}),w=a.extend({update:function(t,e){var n=t.data(this.type);n.close(),n.value(this.finder.getFormat(e))}}),b=w.extend({init:function(t){a.fn.init.call(this,t),this.type=e.support.browser.msie||e.support.touch?"kendoDropDownList":"kendoComboBox",this.format=[{tags:["span"]}],this.finder=new v(this.format,t.cssAttr)},command:function(t){var e=this.options,n=this.format,o={};return new i.FormatCommand(d(t,{formatter:function(){return o[e.domAttr]=t.value,new _(n,{style:o},e.cssAttr)}}))},initialize:function(t,e){var n,i=e.editor,o=this.options,r=o.name,s=[];o.defaultValue&&(s=[{text:i.options.messages[o.defaultValue[0].text],value:o.defaultValue[0].value}]),n=s.concat(o.items?o.items:i.options[r]||[]),t[this.type]({dataTextField:"text",dataValueField:"value",dataSource:n,change:function(){a.exec(i,r,this.value())},highlightFirst:!1}),t.closest(".k-widget").removeClass("k-"+r).find("*").addBack().attr("unselectable","on"),t.data(this.type).value("inherit")}}),x=a.extend({init:function(t){a.fn.init.call(this,t),this.format=[{tags:["span"]}],this.finder=new v(this.format,t.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(t){var e=this.options,n=this.format,o={};return new i.FormatCommand(d(t,{formatter:function(){return o[e.domAttr]=t.value,new _(n,{style:o},e.cssAttr)}}))},initialize:function(n,i){var o=i.editor,r=this.name,s=d({},x.fn.options,this.options),l=s.palette;n=this._widget=new e.ui.ColorPicker(n,{value:t.isArray(l)?l[0]:"#000",toolIcon:"k-"+s.name,palette:l,change:function(){var t=n.value();t&&a.exec(o,r,t),o.focus()},activate:function(t){t.preventDefault(),n.trigger("change")}}),n.wrapper.attr({title:i.title,unselectable:"on"}).find("*").attr("unselectable","on")}});d(i,{InlineFormatFinder:g,InlineFormatter:m,DelayedExecutionTool:w,GreedyInlineFormatFinder:v,GreedyInlineFormatter:_,InlineFormatTool:y,FontTool:b,ColorTool:x}),f("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),u("bold",new y({key:"B",ctrl:!0,format:o.bold,template:new s({template:r.buttonTemplate,title:"Bold"})})),f("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),u("italic",new y({key:"I",ctrl:!0,format:o.italic,template:new s({template:r.buttonTemplate,title:"Italic"})})),f("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),u("underline",new y({key:"U",ctrl:!0,format:o.underline,template:new s({template:r.buttonTemplate,title:"Underline"})})),f("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),u("strikethrough",new y({format:o.strikethrough,template:new s({template:r.buttonTemplate,title:"Strikethrough"})})),f("superscript",[{tags:["sup"]}]),u("superscript",new y({format:o.superscript,template:new s({template:r.buttonTemplate,title:"Superscript"})})),f("subscript",[{tags:["sub"]}]),u("subscript",new y({format:o.subscript,template:new s({template:r.buttonTemplate,title:"Subscript"})})),u("foreColor",new x({cssAttr:"color",domAttr:"color",name:"foreColor",template:new s({template:r.colorPickerTemplate,title:"Color"})})),u("backColor",new x({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new s({template:r.colorPickerTemplate,title:"Background Color"})})),u("fontName",new b({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new s({template:r.comboBoxTemplate,title:"Font Name"})})),u("fontSize",new b({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new s({template:r.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery),function(t){var e,n=window.kendo,i=n.Class,o=t.extend,r=n.ui.editor,a=n.ui.Editor.fn.options.formats,s=r.Dom,l=r.Command,c=r.ToolTemplate,h=r.FormatTool,d=r.EditorUtils,u=d.registerTool,f=d.registerFormat,p=r.RangeUtils,g=i.extend({init:function(t){this.format=t},contains:function(t,e){var n,i,o;for(n=0,i=e.length;i>n;n++)if(o=e[n],!o||!s.isAncestorOrSelf(t,o))return!1;return!0},findSuitable:function(e){var n,i,o,r,a=this.format,l=[];for(n=0,i=e.length;i>n;n++){for(r=a.length-1;r>=0&&!(o=s.ofType(e[n],a[r].tags)?e[n]:s.parentOfType(e[n],a[r].tags));r--);if(!o||"true"===o.contentEditable)return[];t.inArray(o,l)<0&&l.push(o)}for(n=0,i=l.length;i>n;n++)if(this.contains(l[n],l))return[l[n]];return l},findFormat:function(t){var e,n,i,o,r,a=this.format,l=s.editableParent(t);for(e=0,n=a.length;n>e;e++)for(i=t,o=a[e].tags,r=a[e].attr;i&&s.isAncestorOf(l,i);){if(s.ofType(i,o)&&s.attrEquals(i,r))return i;i=i.parentNode}return null},getFormat:function(t){var e,n,i=this,o=function(t){return i.findFormat(s.isDataNode(t)?t.parentNode:t)},r=o(t[0]);if(!r)return"";for(e=1,n=t.length;n>e;e++)if(r!=o(t[e]))return"";return r.nodeName.toLowerCase()},isFormatted:function(t){for(var e=0,n=t.length;n>e;e++)if(!this.findFormat(t[e]))return!1;return!0}}),m=i.extend({init:function(t,e){this.format=t,this.values=e,this.finder=new g(t)},wrap:function(t,e,n){var i,o,r,a,l,c=1==n.length?s.blockParentOrBody(n[0]):s.commonAncestor.apply(null,n);for(s.isInline(c)&&(c=s.blockParentOrBody(c)),i=s.significantChildNodes(c),o=s.findNodeIndex(i[0]),r=s.create(c.ownerDocument,t,e),a=0;i.length>a;a++)l=i[a],s.isBlock(l)?(s.attr(l,e),r.childNodes.length&&(s.insertBefore(r,l),r=r.cloneNode(!1)),o=s.findNodeIndex(l)+1):r.appendChild(l);r.firstChild&&s.insertAt(c,r,o)},apply:function(e){function n(t){return o({},t&&t.attr,h)}var i,r,a,l,c,h=this.values,u=s.filter("img",e),f=d.formatByName("img",this.format),p=n(f);if(t.each(u,function(){s.attr(this,p)}),u.length!=e.length)if(r=s.filter("img",e,!0),a=this.finder.findSuitable(r),a.length)for(l=0,c=a.length;c>l;l++)i=d.formatByName(s.name(a[l]),this.format),s.attr(a[l],n(i));else i=this.format[0],this.wrap(i.tags[0],n(i),r)},remove:function(t){var e,n,i,o,r;for(e=0,n=t.length;n>e;e++)i=this.finder.findFormat(t[e]),i&&(r=s.name(i),"div"!=r||i.getAttribute("class")?(o=d.formatByName(r,this.format),o.attr.style&&s.unstyle(i,o.attr.style),o.attr.className&&s.removeClass(i,o.attr.className)):s.unwrap(i))},toggle:function(t){var e=this,n=p.nodes(t);e.finder.isFormatted(n)?e.remove(n):e.apply(n)}}),v=i.extend({init:function(t,e){var n=this;n.format=t,n.values=e,n.finder=new g(t)},apply:function(t){var e,n,i,o,a,l,c,h=this.format,d=s.blockParents(t),u=h[0].tags[0];if(d.length)for(e=0,n=d.length;n>e;e++)c=s.name(d[e]),"li"==c?(i=d[e].parentNode,o=new r.ListFormatter(i.nodeName.toLowerCase(),u),a=this.editor.createRange(),a.selectNode(d[e]),o.toggle(a)):u&&("td"==c||d[e].attributes.contentEditable)?new m(h,this.values).apply(d[e].childNodes):(l=s.changeTag(d[e],u),s.attr(l,h[0].attr));else new m(h,this.values).apply(t)},toggle:function(t){var e=p.textNodes(t);e.length||(t.selectNodeContents(t.commonAncestorContainer),e=p.textNodes(t),e.length||(e=s.significantChildNodes(t.commonAncestorContainer))),this.apply(e)}}),_=l.extend({init:function(t){t.formatter=t.formatter(),l.fn.init.call(this,t)}}),y=h.extend({init:function(t){h.fn.init.call(this,o(t,{finder:new g(t.format),formatter:function(){return new m(t.format)}}))}});o(r,{BlockFormatFinder:g,BlockFormatter:m,GreedyBlockFormatter:v,FormatCommand:_,BlockFormatTool:y}),e=["ul","ol","li"],f("justifyLeft",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left",display:"",marginLeft:"",marginRight:""}}},{tags:e,attr:{style:{textAlign:"left",listStylePosition:""}}}]),u("justifyLeft",new y({format:a.justifyLeft,template:new c({template:d.buttonTemplate,title:"Justify Left"})})),f("justifyCenter",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:e,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]),u("justifyCenter",new y({format:a.justifyCenter,template:new c({template:d.buttonTemplate,title:"Justify Center"})})),f("justifyRight",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right",display:"",marginLeft:"",marginRight:""}}},{tags:e,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]),u("justifyRight",new y({format:a.justifyRight,template:new c({template:d.buttonTemplate,title:"Justify Right"})})),f("justifyFull",[{tags:s.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}}},{tags:e,attr:{style:{textAlign:"justify",listStylePosition:""}}}]),u("justifyFull",new y({format:a.justifyFull,template:new c({template:d.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery),function(t){var e=window.kendo,n=t.extend,i=e.ui.editor,o=i.Dom,r=i.Command,a=i.Tool,s=i.BlockFormatter,l=o.normalize,c=i.RangeUtils,h=i.EditorUtils.registerTool,d=r.extend({init:function(t){this.options=t,r.fn.init.call(this,t)},_insertMarker:function(t,e){var n,i=o.create(t,"a");return i.className="k-marker",e.insertNode(i),i.parentNode||(n=e.commonAncestorContainer,n.innerHTML="",n.appendChild(i)),l(i.parentNode),i},_moveFocus:function(t,e){if(o.is(e,"img"))t.setStartBefore(e);else{t.selectNodeContents(e);var n=c.textNodes(t)[0];if(n)o.is(n,"img")?t.setStartBefore(n):t.selectNodeContents(n);else{for(;e.childNodes.length&&!o.is(e.firstChild,"br");)e=e.firstChild;t.selectNodeContents(e)}}},shouldTrim:function(t){var e="p,h1,h2,h3,h4,h5,h6".split(","),n=o.parentOfType(t.startContainer,e),i=o.parentOfType(t.endContainer,e);return n&&!i||!n&&i},_blankAfter:function(t){for(;t&&(o.isMarker(t)||""===o.stripBom(t.nodeValue));)t=t.nextSibling;return!t},exec:function(){var t,e,n,r,a,h,d,u,f=this.getRange(),p=c.documentFromRange(f),g=i.emptyElementContent,m=this.shouldTrim(f);f.deleteContents(),a=this._insertMarker(p,f),h=o.closestEditableOfType(a,["li"]),d=o.closestEditableOfType(a,"h1,h2,h3,h4,h5,h6".split(",")),h?o.emptyNode(h)&&(r=o.create(p,"p"),h.nextSibling&&(u=f.cloneRange(),u.selectNode(h),c.split(u,h.parentNode)),o.insertAfter(r,h.parentNode),o.remove(1==h.parentNode.childNodes.length?h.parentNode:h),r.innerHTML=g,n=r):d&&this._blankAfter(a)&&(r=o.create(p,"p"),o.insertAfter(r,d),r.innerHTML=g,o.remove(a),n=r),n||(h||d||new s([{tags:["p"]}]).apply([a]),f.selectNode(a),t=o.parentOfType(a,[h?"li":d?o.name(d):"p"]),c.split(f,t,m),e=t.previousSibling,o.is(e,"li")&&e.firstChild&&!o.is(e.firstChild,"br")&&(e=e.firstChild),n=t.nextSibling,o.is(n,"li")&&n.firstChild&&!o.is(n.firstChild,"br")&&(n=n.firstChild),o.remove(t),this.clean(e),this.clean(n,{links:!0}),l(e)),l(n),this._moveFocus(f,n),f.collapse(!0),o.scrollTo(n),c.selectRange(f)},clean:function(t,e){var n=t;if(t.firstChild&&o.is(t.firstChild,"br")&&o.remove(t.firstChild),o.isDataNode(t)&&!t.nodeValue&&(t=t.parentNode),t){for(;t.firstChild&&1==t.firstChild.nodeType;)t=t.firstChild;if(!o.isEmpty(t)&&/^\s*$/.test(t.innerHTML)&&(t.innerHTML=i.emptyElementContent),e&&e.links)for(;t!=n;){if(o.is(t,"a")&&o.emptyNode(t)){o.unwrap(t);break}t=t.parentNode}}}}),u=r.extend({init:function(t){this.options=t,r.fn.init.call(this,t)},exec:function(){var t,n=this.getRange(),i=o.create(c.documentFromRange(n),"br"),r=e.support.browser,a=r.msie&&11>r.version;n.deleteContents(),n.insertNode(i),l(i.parentNode),a||i.nextSibling&&!o.isWhitespace(i.nextSibling)||(t=i.cloneNode(!0),t.className="k-br",o.insertAfter(t,i)),n.setStartAfter(i),n.collapse(!0),o.scrollTo(i.nextSibling||i),c.selectRange(n)}});n(i,{ParagraphCommand:d,NewLineCommand:u}),h("insertLineBreak",new a({key:13,shift:!0,command:u})),h("insertParagraph",new a({key:13,command:d}))}(window.kendo.jQuery),function(t){var e=window.kendo,n=e.Class,i=t.extend,o=e.ui.editor,r=o.Dom,a=o.RangeUtils,s=o.EditorUtils,l=o.Command,c=o.ToolTemplate,h=o.FormatTool,d=o.BlockFormatFinder,u=a.textNodes,f=o.EditorUtils.registerTool,p=d.extend({init:function(t){this.tag=t;var e=this.tags=["ul"==t?"ol":"ul",t];d.fn.init.call(this,[{tags:e}])},isFormatted:function(t){var e,n,i=[];for(n=0;t.length>n;n++)(e=this.findFormat(t[n]))&&r.name(e)==this.tag&&i.push(e);if(1>i.length)return!1;if(i.length!=t.length)return!1;for(n=0;i.length>n&&i[n].parentNode==e.parentNode;n++)if(i[n]!=e)return!1;return!0},findSuitable:function(t){var e=r.parentOfType(t[0],this.tags);return e&&r.name(e)==this.tag?e:null}}),g=n.extend({init:function(t,e){var n=this;n.finder=new p(t),n.tag=t,n.unwrapTag=e},isList:function(t){var e=r.name(t);return"ul"==e||"ol"==e||"dl"==e},wrap:function(t,e){var n,i,o=r.create(t.ownerDocument,"li");for(n=0;e.length>n;n++)if(i=e[n],r.is(i,"li"))t.appendChild(i);else if(this.isList(i))for(;i.firstChild;)t.appendChild(i.firstChild);else if(r.is(i,"td")){for(;i.firstChild;)o.appendChild(i.firstChild);t.appendChild(o),i.appendChild(t),t=t.cloneNode(!1),o=o.cloneNode(!1)}else o.appendChild(i),r.isBlock(i)&&(t.appendChild(o),r.unwrap(i),o=o.cloneNode(!1));o.firstChild&&t.appendChild(o)},containsAny:function(t,e){for(var n=0;e.length>n;n++)if(r.isAncestorOrSelf(t,e[n]))return!0;return!1},suitable:function(t,e){if("k-marker"==t.className){var n=t.nextSibling;if(n&&r.isBlock(n))return!1;if(n=t.previousSibling,n&&r.isBlock(n))return!1}return this.containsAny(t,e)||r.isInline(t)||3==t.nodeType},split:function(e){var n,i,o,s,l,c,h=u(e);if(h.length)for(n=r.parentOfType(h[0],["li"]),i=r.parentOfType(h[h.length-1],["li"]),e.setStartBefore(n),e.setEndAfter(i),o=0,s=h.length;s>o;o++)l=this.finder.findFormat(h[o]),l&&(c=t(l).parents("ul,ol"),c[0]?a.split(e,c.last()[0],!0):a.split(e,l,!0))},merge:function(t,e){for(var n,i=e.previousSibling;i&&("k-marker"==i.className||3==i.nodeType&&r.isWhitespace(i));)i=i.previousSibling;if(i&&r.name(i)==t){for(;e.firstChild;)i.appendChild(e.firstChild);r.remove(e),e=i}for(n=e.nextSibling;n&&("k-marker"==n.className||3==n.nodeType&&r.isWhitespace(n));)n=n.nextSibling;if(n&&r.name(n)==t){for(;e.lastChild;)n.insertBefore(e.lastChild,n.firstChild);r.remove(e)}},breakable:function(t){return t!=t.ownerDocument.body&&!/table|tbody|tr|td/.test(r.name(t))&&!t.attributes.contentEditable},applyOnSection:function(e,n){function i(){d.push(this)}var o,a,s,l,c=this.tag,h=r.closestSplittableParent(n),d=[],u=this.finder.findSuitable(n);for(u||(u=new p("ul"==c?"ol":"ul").findSuitable(n)),/table|tbody/.test(r.name(h))?o=t.map(n,function(t){return r.parentOfType(t,["td"])}):(o=r.significantChildNodes(h),t.grep(o,r.isBlock).length&&(o=t.grep(o,t.proxy(function(t){return this.containsAny(t,n)},this))),o.length||(o=n)),a=0;o.length>a;a++)s=o[a],l=(!u||!r.isAncestorOrSelf(u,s))&&this.suitable(s,n),l&&(u&&this.isList(s)?(t.each(s.childNodes,i),r.remove(s)):d.push(s));d.length==o.length&&this.breakable(h)&&(d=[h]),u||(u=r.create(h.ownerDocument,c),r.insertBefore(u,d[0])),this.wrap(u,d),r.is(u,c)||r.changeTag(u,c),this.merge(c,u)},apply:function(t){var e,n,i,o=0,a=[];do i=r.closestEditable(t[o],["td","body"]),e&&i==e?n.push(t[o]):(e&&a.push({section:e,nodes:n}),n=[t[o]],e=i),o++;while(t.length>o);for(a.push({section:e,nodes:n}),o=0;a.length>o;o++)this.applyOnSection(a[o].section,a[o].nodes)},unwrap:function(e){var n,i,o,a,s=e.ownerDocument.createDocumentFragment(),l=this.unwrapTag;for(i=e.firstChild;i;i=i.nextSibling){for(o=r.create(e.ownerDocument,l||"p");i.firstChild;)a=i.firstChild,r.isBlock(a)?(o.firstChild&&(s.appendChild(o),o=r.create(e.ownerDocument,l||"p")),s.appendChild(a)):o.appendChild(a);o.firstChild&&s.appendChild(o)}n=t(e).parents("ul,ol"),n[0]?(r.insertAfter(s,n.last()[0]),n.last().remove()):r.insertAfter(s,e),r.remove(e)},remove:function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)e=this.finder.findFormat(t[n]),e&&this.unwrap(e)},toggle:function(t){var e,n=this,i=u(t),o=t.commonAncestorContainer;i.length||(t.selectNodeContents(o),i=u(t),i.length||(e=o.ownerDocument.createTextNode(""),t.startContainer.appendChild(e),i=[e],t.selectNode(e.parentNode))),n.finder.isFormatted(i)?(n.split(t),n.remove(i)):n.apply(i)}}),m=l.extend({init:function(t){t.formatter=new g(t.tag),l.fn.init.call(this,t)}}),v=h.extend({init:function(t){this.options=t,h.fn.init.call(this,i(t,{finder:new p(t.tag)}))},command:function(t){return new m(i(t,{tag:this.options.tag}))}});i(o,{ListFormatFinder:p,ListFormatter:g,ListCommand:m,ListTool:v}),f("insertUnorderedList",new v({tag:"ul",template:new c({template:s.buttonTemplate,title:"Insert unordered list"})})),f("insertOrderedList",new v({tag:"ol",template:new c({template:s.buttonTemplate,title:"Insert ordered list"})}))}(window.kendo.jQuery),function(t){var e=window.kendo,n=e.Class,i=t.extend,o=t.proxy,r=e.ui.editor,a=r.Dom,s=r.RangeUtils,l=r.EditorUtils,c=r.Command,h=r.Tool,d=r.ToolTemplate,u=r.InlineFormatter,f=r.InlineFormatFinder,p=s.textNodes,g=r.EditorUtils.registerTool,m=n.extend({findSuitable:function(t){return a.parentOfType(t,["a"])}}),v=n.extend({init:function(){this.finder=new m},apply:function(t,e){var n,i,o,r,l,c=p(t);e.innerHTML?(n=s.getMarkers(t),i=s.documentFromRange(t),t.deleteContents(),r=a.create(i,"a",e),t.insertNode(r),l=r.parentNode,"a"==a.name(l)&&a.insertAfter(r,l),a.emptyNode(l)&&a.remove(l),n.length>1&&(a.insertAfter(n[n.length-1],r),a.insertAfter(n[1],r),a[c.length>0?"insertBefore":"insertAfter"](n[0],r))):(o=new u([{tags:["a"]}],e),o.finder=this.finder,o.apply(c))}}),_=c.extend({init:function(t){t.formatter={toggle:function(t){new u([{tags:["a"]}]).remove(p(t))}},this.options=t,c.fn.init.call(this,t)}}),y=c.extend({init:function(t){var e=this;e.options=t,c.fn.init.call(e,t),e.formatter=new v,t.url?this.exec=function(){this.formatter.apply(t.range,{href:t.url,innerHTML:t.text||t.url,target:t.target})}:(e.attributes=null,e.async=!0)},_dialogTemplate:function(){return e.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){var e,n,i,r,s=this.getRange().collapsed,l=this.editor.options.messages;this._initialText="",this._range=this.lockRange(!0),e=p(this._range),n=e.length?this.formatter.finder.findSuitable(e[0]):null,i=e.length&&"img"==a.name(e[0]),r=this.createDialog(this._dialogTemplate(),{title:l.createLink,close:o(this._close,this),visible:!1}),r.find(".k-dialog-insert").click(o(this._apply,this)).end().find(".k-dialog-close").click(o(this._close,this)).end().find(".k-edit-field input").keydown(o(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(n)).end().find("#k-editor-link-text").val(this.linkText(e)).end().find("#k-editor-link-title").val(n?n.title:"").end().find("#k-editor-link-target").attr("checked",n?"_blank"==n.target:!1).end().find(".k-editor-link-text-row").toggle(!i),e.length>0&&!s&&(this._initialText=t("#k-editor-link-text",r).val()),this._dialog=r.data("kendoWindow").center().open(),t("#k-editor-link-url",r).focus().select()},_keydown:function(t){var n=e.keys;t.keyCode==n.ENTER?this._apply(t):t.keyCode==n.ESC&&this._close(t)},_apply:function(e){var n,i,o,r=this._dialog.element,s=t("#k-editor-link-url",r).val(),l=t("#k-editor-link-text",r);s&&"http://"!=s&&(s.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(s)&&(s="mailto:"+s),this.attributes={href:s},n=t("#k-editor-link-title",r).val(),n&&(this.attributes.title=n),l.is(":visible")&&(i=l.val(),i||this._initialText?i&&i!==this._initialText&&(this.attributes.innerHTML=a.stripBom(i)):this.attributes.innerHTML=s),o=t("#k-editor-link-target",r).is(":checked"),this.attributes.target=o?"_blank":null,this.formatter.apply(this._range,this.attributes)),this._close(e),this.change&&this.change()},_close:function(t){t.preventDefault(),this._dialog.destroy(),a.windowFromDocument(s.documentFromRange(this._range)).focus(),this.releaseRange(this._range)},linkUrl:function(t){return t?t.getAttribute("href",2):"http://"},linkText:function(t){var e="";return 1==t.length?e=t[0].nodeValue:t.length&&(e=t[0].nodeValue+t[1].nodeValue),a.stripBom(e||"")},redo:function(){var t=this.lockRange(!0);this.formatter.apply(t,this.attributes),this.releaseRange(t)}}),w=h.extend({init:function(e){this.options=e,this.finder=new f([{tags:["a"]}]),h.fn.init.call(this,t.extend(e,{command:_}))},initialize:function(t,e){h.fn.initialize.call(this,t,e),t.addClass("k-state-disabled")},update:function(t,e){t.toggleClass("k-state-disabled",!this.finder.isFormatted(e)).removeClass("k-state-hover")}});i(e.ui.editor,{LinkFormatFinder:m,LinkFormatter:v,UnlinkCommand:_,LinkCommand:y,UnlinkTool:w}),g("createLink",new h({key:"K",ctrl:!0,command:y,template:new d({template:l.buttonTemplate,title:"Create Link"})})),g("unlink",new w({key:"K",ctrl:!0,shift:!0,template:new d({template:l.buttonTemplate,title:"Remove Link"})}))}(window.kendo.jQuery),function(t,e){var n=window.kendo,i=t.extend,o=n.ui.editor,r=o.EditorUtils,a=o.Dom,s=r.registerTool,l=o.ToolTemplate,c=o.RangeUtils,h=o.Command,d=o.LinkFormatter,u=c.textNodes,f=n.keys,p="#k-editor-file-url",g="#k-editor-file-title",m=h.extend({init:function(t){var e=this;h.fn.init.call(e,t),e.formatter=new d,e.async=!0,e.attributes={}},insertFile:function(t,e){var n=this.attributes,i=c.documentFromRange(e);if(n.href&&"http://"!=n.href){if(!t)return t=a.create(i,"a",{href:n.href}),t.innerHTML=n.innerHTML,e.deleteContents(),e.insertNode(t),t.nextSibling||a.insertAfter(i.createTextNode("ï»¿"),t),e.setStartAfter(t),e.setEndAfter(t),c.selectRange(e),!0;a.attr(t,n)}return!1},_dialogTemplate:function(t){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:t})},redo:function(){var t=this,e=t.lockRange();this.formatter.apply(e,this.attributes),t.releaseRange(e)},exec:function(){function t(t){var e=s.element,n=e.find(p).val().replace(/ /g,"%20"),i=e.find(g).val();l.attributes={href:n,innerHTML:""!==i?i:n},m=l.insertFile(v,h),o(t),l.change&&l.change()}function o(t){t.preventDefault(),s.destroy(),a.windowFromDocument(c.documentFromRange(h)).focus(),m||l.releaseRange(h)}function r(e){e.keyCode==f.ENTER?t(e):e.keyCode==f.ESC&&o(e)}var s,l=this,h=l.lockRange(),d=u(h),m=!1,v=d.length?this.formatter.finder.findSuitable(d[0]):null,_=l.editor.options,y=_.messages,w=_.fileBrowser,b=!!(n.ui.FileBrowser&&w&&w.transport&&w.transport.read!==e),x={title:y.insertFile,visible:!1,resizable:b};x.close=o,b&&(x.width=750),s=this.createDialog(l._dialogTemplate(b),x).toggleClass("k-filebrowser-dialog",b).find(".k-dialog-insert").click(t).end().find(".k-dialog-close").click(o).end().find(".k-edit-field input").keydown(r).end().find(p).val(v?v.getAttribute("href",2):"http://").end().find(g).val(v?v.title:"").end().data("kendoWindow"),b&&new n.ui.FileBrowser(s.element.find(".k-filebrowser"),i({},w,{change:function(){s.element.find(p).val(this.value())},apply:t})),s.center().open(),s.element.find(p).focus().select()}});n.ui.editor.FileCommand=m,s("insertFile",new o.Tool({command:m,template:new l({template:r.buttonTemplate,title:"Insert File"})}))}(window.kendo.jQuery),function(t,e){var n=window.kendo,i=t.extend,o=n.ui.editor,r=o.EditorUtils,a=o.Dom,s=r.registerTool,l=o.ToolTemplate,c=o.RangeUtils,h=o.Command,d=n.keys,u="#k-editor-image-url",f="#k-editor-image-title",p="#k-editor-image-width",g="#k-editor-image-height",m=h.extend({init:function(t){var e=this;h.fn.init.call(e,t),e.async=!0,e.attributes={}},insertImage:function(t,e){var n,i=this.attributes,o=c.documentFromRange(e);if(i.src&&"http://"!=i.src){if(n=function(){setTimeout(function(){i.width||t.removeAttribute("width"),i.height||t.removeAttribute("height"),t.removeAttribute("complete")})},!t)return t=a.create(o,"img",i),t.onload=t.onerror=function(){n()},e.deleteContents(),e.insertNode(t),t.nextSibling||a.insertAfter(o.createTextNode("ï»¿"),t),n(),e.setStartAfter(t),e.setEndAfter(t),c.selectRange(e),!0;a.attr(t,i),n()}return!1},_dialogTemplate:function(t){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:t})},redo:function(){var t=this,e=t.lockRange();t.insertImage(c.image(e),e)||t.releaseRange(e)},exec:function(){function t(t){var e=s.element,n=parseInt(e.find(p).val(),10),i=parseInt(e.find(g).val(),10);l.attributes={src:e.find(u).val().replace(/ /g,"%20"),alt:e.find(f).val()},l.attributes.width=null,l.attributes.height=null,!isNaN(n)&&n>0&&(l.attributes.width=n),!isNaN(i)&&i>0&&(l.attributes.height=i),m=l.insertImage(v,h),o(t),l.change&&l.change()}function o(t){t.preventDefault(),s.destroy(),a.windowFromDocument(c.documentFromRange(h)).focus(),m||l.releaseRange(h)}function r(e){e.keyCode==d.ENTER?t(e):e.keyCode==d.ESC&&o(e)}var s,l=this,h=l.lockRange(),m=!1,v=c.image(h),_=v&&v.getAttribute("width")||"",y=v&&v.getAttribute("height")||"",w=l.editor.options,b=w.messages,x=w.imageBrowser,k=!!(n.ui.ImageBrowser&&x&&x.transport&&x.transport.read!==e),C={title:b.insertImage,visible:!1,resizable:k};C.close=o,k&&(C.width=750),s=this.createDialog(l._dialogTemplate(k),C).toggleClass("k-filebrowser-dialog",k).find(".k-dialog-insert").click(t).end().find(".k-dialog-close").click(o).end().find(".k-edit-field input").keydown(r).end().find(u).val(v?v.getAttribute("src",2):"http://").end().find(f).val(v?v.alt:"").end().find(p).val(_).end().find(g).val(y).end().data("kendoWindow"),k&&new n.ui.ImageBrowser(s.element.find(".k-imagebrowser"),i({},x,{change:function(){s.element.find(u).val(this.value())},apply:t})),s.center().open(),s.element.find(u).focus().select()}});n.ui.editor.ImageCommand=m,s("insertImage",new o.Tool({command:m,template:new l({template:r.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery),function(t,e){var n=window.kendo,i=n.ui.DropDownList,o=n.ui.editor.Dom,r=i.extend({init:function(e,o){var r=this;i.fn.init.call(r,e,o),n.support.mobileOS.ios&&(this._initSelectOverlay(),this.bind("dataBound",t.proxy(this._initSelectOverlay,this))),r.value(r.options.title),r.bind("open",function(){if(r.options.autoSize){var t,e=r.list;e.css({whiteSpace:"nowrap",width:"auto"}),t=e.width(),t?t+=20:t=r._listWidth,e.css("width",t+n.support.scrollbar()),r._listWidth=t}})},options:{name:"SelectBox"},_initSelectOverlay:function(){var e,i,o,r,a=this,s=a.value(),l=this.dataSource.view(),c="",h=n.htmlEncode;for(i=0;l.length>i;i++)e=l[i],c+="<option value='"+h(e.value)+"'",e.value==s&&(c+=" selected"),c+=">"+h(e.text)+"</option>";o=t("<select class='k-select-overlay'>"+c+"</select>"),r=t(this.element).closest(".k-widget"),r.next(".k-select-overlay").remove(),o.insertAfter(r),o.on("change",function(){a.value(this.value),a.trigger("change")
})},value:function(t){var n=this,o=i.fn.value.call(n,t);return t===e?o:(t!==i.fn.value.call(n)&&(n.text(n.options.title),n._current&&n._current.removeClass("k-state-selected"),n.current(null),n._oldIndex=n.selectedIndex=-1),e)},decorate:function(e){var n,i,r,a,s=this,l=s.dataSource,c=l.data();for(e&&s.list.css("background-color",o.getEffectiveBackground(t(e))),n=0;c.length>n;n++)i=c[n].tag||"span",r=c[n].className,a=o.inlineStyle(e,i,{className:r}),a=a.replace(/"/g,"'"),c[n].style=a+";display:inline-block";l.trigger("change")}});n.ui.plugin(r),n.ui.editor.SelectBox=r}(window.kendo.jQuery),function(t,e){function n(n,i){var o="rtl"==t(n).css("direction"),r=o?"Right":"Left",a="td"!=s.name(n)?"margin"+r:"padding"+r;return i===e?n.style[a]||0:(i>0?n.style[a]=i+"px":(n.style[a]="",n.style.cssText||n.removeAttribute("style")),e)}var i=window.kendo,o=i.Class,r=t.extend,a=i.ui.editor,s=a.Dom,l=a.EditorUtils,c=l.registerTool,h=a.Command,d=a.Tool,u=a.ToolTemplate,f=a.RangeUtils,p=s.blockElements,g=a.BlockFormatFinder,m=a.BlockFormatter,v=o.extend({init:function(){this.finder=new g([{tags:s.blockElements}])},apply:function(e){var i,o,r,a,l,c,h,d,u,f,p=this.finder.findSuitable(e),g=[];if(p.length){for(i=0,o=p.length;o>i;i++)s.is(p[i],"li")?t(p[i]).index()?t.inArray(p[i].parentNode,g)<0&&g.push(p[i]):g.push(p[i].parentNode):g.push(p[i]);for(;g.length;)if(r=g.shift(),s.is(r,"li"))if(a=r.parentNode,l=t(r).prev("li"),c=l.find("ul,ol").last(),h=t(r).children("ul,ol")[0],h&&l[0])c[0]?(c.append(r),c.append(t(h).children()),s.remove(h)):(l.append(h),h.insertBefore(r,h.firstChild));else for(h=l.children("ul,ol")[0],h||(h=s.create(r.ownerDocument,s.name(a)),l.append(h));r&&r.parentNode==a;)h.appendChild(r),r=g.shift();else for(d=parseInt(n(r),10)+30,n(r,d),u=0;g.length>u;u++)t.contains(r,g[u])&&g.splice(u,1)}else f=new m([{tags:["p"]}],{style:{marginLeft:30}}),f.apply(e)},remove:function(e){var i,o,r,a,s,l,c,h,d=this.finder.findSuitable(e);for(o=0,r=d.length;r>o;o++){if(c=t(d[o]),c.is("li")){if(a=c.parent(),s=a.parent(),s.is("li,ul,ol")&&!n(a[0])){if(i&&t.contains(i,s[0]))continue;l=c.nextAll("li"),l.length&&t(a[0].cloneNode(!1)).appendTo(c).append(l),s.is("li")?c.insertAfter(s):c.appendTo(s),a.children("li").length||a.remove();continue}if(i==a[0])continue;i=a[0]}else i=d[o];h=parseInt(n(i),10)-30,n(i,h)}}}),_=h.extend({init:function(t){t.formatter={toggle:function(t){(new v).apply(f.nodes(t))}},h.fn.init.call(this,t)}}),y=h.extend({init:function(t){t.formatter={toggle:function(t){(new v).remove(f.nodes(t))}},h.fn.init.call(this,t)}}),w=d.extend({init:function(t){d.fn.init.call(this,t),this.finder=new g([{tags:p}])},initialize:function(t,e){d.fn.initialize.call(this,t,e),t.addClass("k-state-disabled")},update:function(i,o){var r,a,l,c,h=this.finder.findSuitable(o);for(l=0,c=h.length;c>l;l++)if(r=n(h[l]),r||(a=t(h[l]).parents("ul,ol").length,r=s.is(h[l],"li")&&(a>1||n(h[l].parentNode))||s.ofType(h[l],["ul","ol"])&&a>0),r)return i.removeClass("k-state-disabled"),e;i.addClass("k-state-disabled").removeClass("k-state-hover")}});r(a,{IndentFormatter:v,IndentCommand:_,OutdentCommand:y,OutdentTool:w}),c("indent",new d({command:_,template:new u({template:l.buttonTemplate,title:"Indent"})})),c("outdent",new w({command:y,template:new u({template:l.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery),function(t){var e=window.kendo,n=t.extend,i=e.ui.editor,o=i.EditorUtils,r=i.Command,a=i.Tool,s=i.ToolTemplate,l=r.extend({init:function(t){var e=this;e.options=t,r.fn.init.call(e,t),e.attributes=null,e.async=!0},exec:function(){function n(t){r.value(s.find(h).val()),i(t),o.change&&o.change(),r.trigger("change")}function i(t){t.preventDefault(),s.data("kendoWindow").destroy(),r.focus()}var o=this,r=o.editor,a=r.options.messages,s=t(e.template(l.template)(a)).appendTo(document.body),c=l.indent(r.value()),h=".k-editor-textarea";this.createDialog(s,{title:a.viewHtml,close:i,visible:!1}).find(h).val(c).end().find(".k-dialog-update").click(n).end().find(".k-dialog-close").click(i).end().data("kendoWindow").center().open(),s.find(h).focus()}});n(l,{template:"<div class='k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div>",indent:function(t){return t.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),e.ui.editor.ViewHtmlCommand=l,i.EditorUtils.registerTool("viewHtml",new a({command:l,template:new s({template:o.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery),function(t){var e=window.kendo,n=e.ui.editor,i=n.Tool,o=n.ToolTemplate,r=n.DelayedExecutionTool,a=n.Command,s=n.Dom,l=n.EditorUtils,c=n.RangeUtils,h=l.registerTool,d=r.extend({init:function(t){var n=this;i.fn.init.call(n,e.deepExtend({},n.options,t)),n.type="kendoSelectBox",n.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(t){var e,n=t.value;return n?t.tag||t.className?t:(e=n.indexOf("."),0===e?t.className=n.substring(1):-1==e?t.tag=n:(t.tag=n.substring(0,e),t.className=n.substring(e+1)),t):t},command:function(e){var i=e.value;return i=this.toFormattingItem(i),new n.FormatCommand({range:e.range,formatter:function(){var e,o=(i.tag||i.context||"span").split(","),r=[{tags:o,attr:{className:i.className||""}}];return e=t.inArray(o[0],s.inlineElements)>=0?new n.GreedyInlineFormatter(r):new n.GreedyBlockFormatter(r)}})},initialize:function(t,n){var o=n.editor,r=this.options,a=r.name,s=this;t.width(r.width),t.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:r.items||o.options[a],title:o.options.messages[a],autoSize:!0,change:function(){i.exec(o,a,this.dataItem().toJSON())},dataBound:function(){var t,e=this.dataSource.data();for(t=0;e.length>t;t++)e[t]=s.toFormattingItem(e[t])},highlightFirst:!1,template:e.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}),t.addClass("k-decorated").closest(".k-widget").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(e,n){var i,o,r,a,s,l,c;for(i=0;e.length>i;i++)if(o=e[i],r=o.tag||o.context||"",a=o.className?"."+o.className:"",s=r+a,l=t(n[0]).closest(s)[0]){if(1==n.length)return o.value;for(c=1;n.length>c&&t(n[c]).closest(s)[0];c++)if(c==n.length-1)return o.value}return""},update:function(e,n){var i,o,a,l,c,h=t(e).data(this.type);if(h){for(i=h.dataSource,o=i.data(),c=s.commonAncestor.apply(null,n),a=0;o.length>a;a++)l=o[a].context,o[a].visible=!l||!!t(c).closest(l).length;i.filter([{field:"visible",operator:"eq",value:!0}]),r.fn.update.call(this,e,n),h.value(this.getFormattingValue(i.view(),n)),h.wrapper.toggleClass("k-state-disabled",!i.view().length)}}}),u=a.extend({exec:function(){var t,e=this.lockRange(!0),i=this.options.remove||"strong,em,span".split(",");c.wrapSelectedElements(e),t=new n.RangeIterator(e),t.traverse(function o(t){if(t&&!s.isMarker(t)){if(1==t.nodeType&&!s.insignificant(t)){for(var e=t.childNodes.length-1;e>=0;e--)o(t.childNodes[e]);t.removeAttribute("style"),t.removeAttribute("class")}i.indexOf(s.name(t))>-1&&s.unwrap(t)}}),this.releaseRange(e)}});t.extend(n,{FormattingTool:d,CleanFormatCommand:u}),h("formatting",new d({template:new o({template:l.dropDownListTemplate,title:"Format"})})),h("cleanFormatting",new i({command:u,template:new o({template:l.buttonTemplate,title:"Clean formatting"})}))}(window.kendo.jQuery),function(t){var e=window.kendo,n=e.ui,i=n.editor,o=n.Widget,r=t.extend,a=t.proxy,s=e.keys,l=".kendoEditor",c="a.k-tool:not(.k-state-disabled),.k-widget.k-colorpicker,.k-selectbox,.k-dropdown,.k-combobox .k-input",h=o.extend({init:function(t,e){var n=this;e=r({},e,{name:"EditorToolbar"}),o.fn.init.call(n,t,e),e.popup&&n._initPopup()},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml","cleanFormatting"]},_initPopup:function(){this.window=t(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-move' /></button>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(e){t(e.target).is(".k-icon")||e.preventDefault()}).data("kendoWindow")},items:function(){return this.element.children().find("> *, select")},focused:function(){return this.element.find(".k-state-focused").length>0},toolById:function(t){var e,n=this.tools;for(e in n)if(e.toLowerCase()==t)return n[e]},toolGroupFor:function(e){var n,i=this.groups;if(this.isCustomTool(e))return"custom";for(n in i)if(t.inArray(e,i[n])>=0)return n},bindTo:function(e){var n=this,i=n.window;n._editor&&n._editor.unbind("select",a(n.refreshTools,n)),n._editor=e,n.tools=n.expandTools(e.options.tools),n.render(),n.element.find(".k-combobox .k-input").keydown(function(e){var n=t(this).closest(".k-combobox").data("kendoComboBox"),i=e.keyCode;i==s.RIGHT||i==s.LEFT?n.close():i==s.DOWN&&(n.dropDown.isOpened()||(e.stopImmediatePropagation(),n.open()))}),n._attachEvents(),n.items().each(function(){var i,o=n._toolName(this),r=n.tools[o],a=r&&r.options,s=e.options.messages,l=a&&a.tooltip||s[o],c=t(this);r&&r.initialize&&(("fontSize"==o||"fontName"==o)&&(i=s[o+"Inherit"],c.find("input").val(i).end().find("span.k-input").text(i).end()),r.initialize(c,{title:n._appendShortcutSequence(l,r),editor:n._editor}),c.closest(".k-widget",n.element).addClass("k-editor-widget"),c.closest(".k-colorpicker",n.element).next(".k-colorpicker").addClass("k-editor-widget"))}),e.bind("select",a(n.refreshTools,n)),n.update(),i&&i.wrapper.css({top:"",left:"",width:""})},show:function(){var t,e,n,i=this,o=i.window,r=i.options.editor;o&&(t=o.wrapper,e=r.element,t.is(":visible")&&i.window.options.visible||(t[0].style.width||t.width(e.outerWidth()-parseInt(t.css("border-left-width"),10)-parseInt(t.css("border-right-width"),10)),o._moved||(n=e.offset(),t.css({top:Math.max(0,parseInt(n.top,10)-t.outerHeight()-parseInt(i.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(n.left,10))})),o.open()))},hide:function(){this.window&&this.window.close()},focus:function(){var t="tabIndex",e=this.element,n=this._editor.element.attr(t);e.attr(t,n||0).focus().find(c).first().focus(),n||0===n||e.removeAttr(t)},_appendShortcutSequence:function(t,e){if(!e.key)return t;var n=t+" (";return e.ctrl&&(n+="Ctrl + "),e.shift&&(n+="Shift + "),e.alt&&(n+="Alt + "),n+=e.key+")"},_nativeTools:["insertLineBreak","insertParagraph","redo","undo"],tools:{},isCustomTool:function(t){return!(t in e.ui.Editor.defaultTools)},expandTools:function(n){var o,a,s,l,c=this._nativeTools,h=e.deepExtend({},e.ui.Editor.defaultTools),d={};for(a=0;n.length>a;a++)o=n[a],l=o.name,t.isPlainObject(o)?l&&h[l]?(d[l]=r({},h[l]),r(d[l].options,o)):(s=r({cssClass:"k-i-custom",type:"button",title:""},o),s.name||(s.name="custom"),s.cssClass="k-"+("custom"==s.name?"i-custom":s.name),s.template||"button"!=s.type||(s.template=i.EditorUtils.buttonTemplate,s.title=s.title||s.tooltip),d[l]={options:s}):h[o]&&(d[o]=h[o]);for(a=0;c.length>a;a++)d[c[a]]||(d[c[a]]=h[c[a]]);return d},render:function(){function n(n){var i;return n.getHtml?i=n.getHtml():(t.isFunction(n)||(n=e.template(n)),i=n(r)),t.trim(i)}function i(){u.children().length&&u.appendTo(v)}function o(){u=t("<li class='k-tool-group' role='presentation' />")}var r,s,l,c,h,d,u,f,p=this,g=p.tools,m=p._editor.element,v=p.element.empty(),_=p._editor.options.tools,y=e.support.browser;for(v.empty(),o(),f=0;_.length>f;f++)c=_[f].name||_[f],r=g[c]&&g[c].options,!r&&t.isPlainObject(c)&&(r=c),s=r&&r.template,"break"==c&&(i(),t("<li class='k-row-break' />").appendTo(p.element),o()),s&&(d=p.toolGroupFor(c),h!=d&&(i(),o(),h=d),s=n(s),l=t(s).appendTo(u),"custom"==d&&(i(),o()),r.exec&&l.hasClass("k-tool")&&l.click(a(r.exec,m[0])));i(),t(p.element).children(":has(> .k-tool)").addClass("k-button-group"),p.options.popup&&y.msie&&9>y.version&&p.window.wrapper.find("*").attr("unselectable","on"),p.updateGroups(),p.angular("compile",function(){return{elements:p.element}})},updateGroups:function(){t(this.element).children().each(function(){t(this).children().filter(function(){return"none"!==this.style.display}).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(e){this.items().filter(".k-decorated").each(function(){var n=t(this).data("kendoSelectBox");n&&n.decorate(e)})},destroy:function(){o.fn.destroy.call(this);var t,e=this.tools;for(t in e)e[t].destroy&&e[t].destroy();this.window&&this.window.destroy()},_attachEvents:function(){var e=this,n="[role=button].k-tool",i=n+":not(.k-state-disabled)",o=n+".k-state-disabled";e.element.off(l).on("mouseenter"+l,i,function(){t(this).addClass("k-state-hover")}).on("mouseleave"+l,i,function(){t(this).removeClass("k-state-hover")}).on("mousedown"+l,n,function(t){t.preventDefault()}).on("keydown"+l,c,function(n){function i(t,n){var i=e.element.find(c),o=i.index(r)+t;return n&&(o=Math.max(0,Math.min(i.length-1,o))),i[o]}var o,r=this,a=n.keyCode;a==s.RIGHT||a==s.LEFT?t(r).hasClass(".k-dropdown")||(o=i(a==s.RIGHT?1:-1,!0)):a==s.ESC?o=e._editor:a!=s.TAB||n.ctrlKey||n.altKey||(n.shiftKey?o=i(-1):(o=i(1),o||(o=e._editor))),o&&(n.preventDefault(),o.focus())}).on("click"+l,i,function(n){var i=t(this);n.preventDefault(),n.stopPropagation(),i.removeClass("k-state-hover"),i.is("[data-popup]")||e._editor.exec(e._toolName(this))}).on("click"+l,o,function(t){t.preventDefault()})},_toolName:function(e){var n,i;if(e)return n=e.className,/k-tool\b/i.test(n)&&(n=e.firstChild.className),i=t.grep(n.split(" "),function(t){return!/^k-(widget|tool|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(t)}),i[0]?i[0].substring(i[0].lastIndexOf("-")+1):"custom"},refreshTools:function(){var n=this,i=n._editor,o=i.getRange(),r=e.ui.editor.RangeUtils.textNodes(o);r.length||(r=[o.startContainer]),n.items().each(function(){var e=n.tools[n._toolName(this)];e&&e.update&&e.update(t(this),r)}),this.update()},update:function(){this.element.children().children().each(function(){var e=t(this);e.css("display",e.hasClass("k-state-disabled")?"none":"")}),this.updateGroups()}});t.extend(i,{Toolbar:h})}(window.jQuery),function(t){var e=window.kendo,n=t.extend,i=t.proxy,o=e.ui.editor,r=o.Dom,a=o.EditorUtils,s=o.RangeUtils,l=o.Command,c=".kendoEditor",h="k-state-active",d="k-state-selected",u=o.Tool,f=o.ToolTemplate,p=o.InsertHtmlCommand,g=o.BlockFormatFinder,m=o.EditorUtils.registerTool,v="<td>"+o.emptyElementContent+"</td>",_=new g([{tags:["table"]}]),y=p.extend({_tableHtml:function(t,e){return t=t||1,e=e||1,"<table class='k-table' data-last>"+Array(t+1).join("<tr>"+Array(e+1).join(v)+"</tr>")+"</table>"},postProcess:function(e,n){var i=t("table[data-last]",e.document).removeAttr("data-last");n.selectNodeContents(i.find("td")[0]),e.selectRange(n)},exec:function(){var t=this.options;t.html=this._tableHtml(t.rows,t.columns),t.postProcess=this.postProcess,p.fn.exec.call(this)}}),w=u.extend({initialize:function(e,n){u.fn.initialize.call(this,e,n);var o=t(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:e,copyAnchorStyles:!1,open:i(this._open,this),activate:i(this._activate,this),close:i(this._close,this)}).data("kendoPopup");e.click(i(this._toggle,this)).keydown(i(this._keydown,this)),this._editor=n.editor,this._popup=o},popup:function(){return this._popup},_activate:t.noop,_open:function(){this._popup.options.anchor.addClass(h)},_close:function(){this._popup.options.anchor.removeClass(h)},_keydown:function(t){var n=e.keys,i=t.keyCode;i==n.DOWN&&t.altKey?this._popup.open():i==n.ESC&&this._popup.close()},_toggle:function(e){var n=t(e.target).closest(".k-tool");n.hasClass("k-state-disabled")||this.popup().toggle()},update:function(t){this.popup().close(),t.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}}),b=w.extend({init:function(e){this.cols=8,this.rows=6,w.fn.init.call(this,t.extend(e,{command:y,popupTemplate:"<div class='k-ct-popup'>"+Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){function n(e){var n=t(window);return{row:Math.floor((e.clientY+n.scrollTop()-d.top)/o)+1,col:Math.floor((e.clientX+n.scrollLeft()-d.left)/i)+1}}var i,o,r=this,a=r._popup.element,s=a.find(".k-ct-cell"),l=s.eq(0),h=s.eq(s.length-1),d=e.getOffset(l),u=e.getOffset(h),f=r.cols,p=r.rows;u.left+=h[0].offsetWidth,u.top+=h[0].offsetHeight,i=(u.left-d.left)/f,o=(u.top-d.top)/p,a.on("mousemove"+c,function(t){r._setTableSize(n(t))}).on("mouseleave"+c,function(){r._setTableSize()}).on("mouseup"+c,function(t){r._exec(n(t))})},_valid:function(t){return t&&t.row>0&&t.col>0&&this.rows>=t.row&&this.cols>=t.col},_exec:function(t){this._valid(t)&&(this._editor.exec("createTable",{rows:t.row,columns:t.col}),this._popup.close())},_setTableSize:function(n){var i=this._popup.element,o=i.find(".k-status"),r=i.find(".k-ct-cell"),a=this.cols,s=this._editor.options.messages;this._valid(n)?(o.text(e.format(s.createTableHint,n.row,n.col)),r.each(function(e){t(this).toggleClass(d,n.col>e%a&&n.row>e/a)})):(o.text(s.dialogCancel),r.removeClass(d))},_keydown:function(t){var n,i,o,r,a,s,l,c;w.fn._keydown.call(this,t),n=e.keys,i=t.keyCode,o=this._popup.element.find(".k-ct-cell"),r=Math.max(o.filter(".k-state-selected").last().index(),0),a=Math.floor(r/this.cols),s=r%this.cols,l=!1,i!=n.DOWN||t.altKey?i==n.UP?(l=!0,a--):i==n.RIGHT?(l=!0,s++):i==n.LEFT&&(l=!0,s--):(l=!0,a++),c={row:Math.max(1,Math.min(this.rows,a+1)),col:Math.max(1,Math.min(this.cols,s+1))},i==n.ENTER?this._exec(c):this._setTableSize(c),l&&(t.preventDefault(),t.stopImmediatePropagation())},_open:function(){var t=this._editor.options.messages;w.fn._open.call(this),this.popup().element.find(".k-status").text(t.dialogCancel).end().find(".k-ct-cell").removeClass(d)},_close:function(){w.fn._close.call(this),this.popup().element.off(c)},update:function(t,e){var n;w.fn.update.call(this,t),n=_.isFormatted(e),t.toggleClass("k-state-disabled",n)}}),x=l.extend({exec:function(){for(var t,e,n,i,a=this.lockRange(!0),s=a.endContainer;"td"!=r.name(s);)s=s.parentNode;for(e=s.parentNode,t=e.children.length,n=e.cloneNode(!0),i=0;e.cells.length>i;i++)n.cells[i].innerHTML=o.emptyElementContent;"before"==this.options.position?r.insertBefore(n,e):r.insertAfter(n,e),this.releaseRange(a)}}),k=l.extend({exec:function(){var t,e,n,i,a=this.lockRange(!0),s=r.closest(a.endContainer,"td"),l=r.closest(s,"table"),c=l.rows,h=this.options.position;for(t=r.findNodeIndex(s),e=0;c.length>e;e++)n=c[e].cells[t],i=n.cloneNode(),i.innerHTML=o.emptyElementContent,"before"==h?r.insertBefore(i,n):r.insertAfter(i,n);this.releaseRange(a)}}),C=l.extend({exec:function(){var e,n,i,o=this.lockRange(),a=s.mapAll(o,function(e){return t(e).closest("tr")[0]}),l=r.closest(a[0],"table");if(a.length>=l.rows.length)e=r.next(l),(!e||r.insignificant(e))&&(e=r.prev(l)),r.remove(l);else for(n=0;a.length>n;n++)i=a[n],r.removeTextSiblings(i),e=r.next(i)||r.prev(i),e=e.cells[0],r.remove(i);e&&(o.setStart(e,0),o.collapse(!0),this.editor.selectRange(o))}}),S=l.extend({exec:function(){var t,e,n=this.lockRange(),i=r.closest(n.endContainer,"td"),o=r.closest(i,"table"),a=o.rows,s=r.findNodeIndex(i,!0),l=a[0].cells.length;if(1==l)t=r.next(o),(!t||r.insignificant(t))&&(t=r.prev(o)),r.remove(o);else for(r.removeTextSiblings(i),t=r.next(i)||r.prev(i),e=0;a.length>e;e++)r.remove(a[e].cells[s]);t&&(n.setStart(t,0),n.collapse(!0),this.editor.selectRange(n))}}),T=u.extend({command:function(t){return t=n(t,this.options),"delete"==t.action?"row"==t.type?new C(t):new S(t):"row"==t.type?new x(t):new k(t)},initialize:function(t,e){u.fn.initialize.call(this,t,e),t.addClass("k-state-disabled")},update:function(t,e){var n=!_.isFormatted(e);t.toggleClass("k-state-disabled",n)}});n(e.ui.editor,{PopupTool:w,TableCommand:y,InsertTableTool:b,TableModificationTool:T,InsertRowCommand:x,InsertColumnCommand:k,DeleteRowCommand:C,DeleteColumnCommand:S}),m("createTable",new b({template:new f({template:a.buttonTemplate,popup:!0,title:"Create table"})})),m("addColumnLeft",new T({type:"column",position:"before",template:new f({template:a.buttonTemplate,title:"Add column on the left"})})),m("addColumnRight",new T({type:"column",template:new f({template:a.buttonTemplate,title:"Add column on the right"})})),m("addRowAbove",new T({type:"row",position:"before",template:new f({template:a.buttonTemplate,title:"Add row above"})})),m("addRowBelow",new T({type:"row",template:new f({template:a.buttonTemplate,title:"Add row below"})})),m("deleteRow",new T({type:"row",action:"delete",template:new f({template:a.buttonTemplate,title:"Delete row"})})),m("deleteColumn",new T({type:"column",action:"delete",template:new f({template:a.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e){e()});