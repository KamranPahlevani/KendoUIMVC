/*
* Kendo UI v2014.3.1119 (http://www.telerik.com/kendo-ui)
* Copyright 2014 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.data.min","./kendo.userevents.min","./kendo.tooltip.min","./kendo.mobile.scroller.min","./kendo.drawing.min","./kendo.core.min","./kendo.draganddrop.min"],e)}(function(){return function(e){function t(e){return typeof e!==z}function n(e,t){var n=i(t);return A.round(e*n)/n}function i(e){return e?A.pow(10,e):1}function r(e,t,n){return A.max(A.min(e,n),t)}function o(e){return e*E}function a(e){return e/E}function s(e){return"number"==typeof e&&!isNaN(e)}function l(e,n){return t(e)?e:n}function c(e){return e*e}function d(e){var t,n=[];for(t in e)n.push(t+e[t]);return n.sort().join("")}function h(e){var t,n=2166136261;for(t=0;e.length>t;++t)n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24),n^=e.charCodeAt(t);return n>>>0}function u(e){return h(d(e))}function f(e){var t,n=e.length,i=I,r=B;for(t=0;n>t;t++)r=A.max(r,e[t]),i=A.min(i,e[t]);return{min:i,max:r}}function p(e){return f(e).min}function g(e){return f(e).max}function m(e){return _(e).min}function v(e){return _(e).max}function _(e){var t,n,i,r=I,o=B;for(t=0,n=e.length;n>t;t++)i=e[t],null!==i&&isFinite(i)&&(r=A.min(r,i),o=A.max(o,i));return{min:r===I?void 0:r,max:o===B?void 0:o}}function y(e){return e?e[e.length-1]:void 0}function w(e,t){return e.push.apply(e,t),e}function b(e){return M.template(e,{useWithBlock:!1,paramName:"d"})}function x(e,n){return t(n)&&null!==n?" "+e+"='"+n+"' ":""}function k(e){var t,n="";for(t=0;e.length>t;t++)n+=x(e[t][0],e[t][1]);return n}function C(e){var n,i,r="";for(n=0;e.length>n;n++)i=e[n][1],t(i)&&(r+=e[n][0]+":"+i+";");return""!==r?r:void 0}function S(e){return"string"!=typeof e&&(e+="px"),e}function T(e){var t,n,i=[];if(e)for(t=M.toHyphens(e).split("-"),n=0;t.length>n;n++)i.push("k-pos-"+t[n]);return i.join(" ")}function D(e){return""===e||null===e||"none"===e||"transparent"===e||!t(e)}var A=Math,M=window.kendo,P=M.deepExtend,E=A.PI/180,I=Number.MAX_VALUE,B=-Number.MAX_VALUE,z="undefined",L=Date.now;L||(L=function(){return(new Date).getTime()}),P(M,{util:{MAX_NUM:I,MIN_NUM:B,append:w,arrayLimits:f,arrayMin:p,arrayMax:g,defined:t,deg:a,hashKey:h,hashObject:u,isNumber:s,isTransparent:D,last:y,limitValue:r,now:L,objectKey:d,round:n,rad:o,renderAttr:x,renderAllAttr:k,renderPos:T,renderSize:S,renderStyle:C,renderTemplate:b,sparseArrayLimits:_,sparseArrayMin:m,sparseArrayMax:v,sqr:c,valueOrDefault:l}}),M.dataviz.util=M.util}(window.kendo.jQuery),function(e,t){var n,i=Math,r=i.abs,o=i.atan,a=i.atan2,s=i.cos,l=i.max,c=i.min,d=i.sin,h=i.tan,u=window.kendo,f=u.Class,p=u.dataviz,g=u.deepExtend,m=u.util,v=m.defined,_=m.deg,y=m.rad,w=m.round,b=m.sqr,x=m.valueOrDefault,k=f.extend({init:function(e,t){1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=t)},DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6},{1:N6}",toArray:function(){return[this.lat,this.lng]},equals:function(e){return e&&e.lat===this.lat&&e.lng===this.lng},clone:function(){return new k(this.lat,this.lng)},round:function(e){return this.lng=w(this.lng,e),this.lat=w(this.lat,e),this},wrap:function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},distanceTo:function(e,t){return this.greatCircleTo(e,t).distance},destination:function(e,t,n){var r,o,l,c,h;return t=y(t),n=n||p.map.datums.WGS84,r=y(this.lat),o=y(this.lng),l=e/u.dataviz.map.datums.WGS84.a,c=i.asin(d(r)*s(l)+s(r)*d(l)*s(t)),h=o+a(d(t)*d(l)*s(r),s(l)-d(r)*d(c)),new k(_(c),_(h))},greatCircleTo:function(e,t){var n,l,c,u,f,g,m,v,x,C,S,T,D,A,M,P,E,I,B,z,L,F,R,O,N,H,V,U,W;if(e=k.create(e),t=t||p.map.datums.WGS84,!e||this.clone().round(8).equals(e.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(n=t.a,l=t.b,c=t.f,u=y(e.lng-this.lng),f=o((1-c)*h(y(this.lat))),g=d(f),m=s(f),v=o((1-c)*h(y(e.lat))),x=d(v),C=s(v),S=u,D=this.DISTANCE_ITERATIONS,A=!1;!A&&D-->0;)M=d(S),P=s(S),E=i.sqrt(b(C*M)+b(m*x-g*C*P)),B=g*x+m*C*P,L=a(E,B),F=m*C*M/E,I=1-b(F),z=0,0!==I&&(z=B-2*g*x/I),T=S,R=c/16*I*(4+c*(4-3*I)),S=u+(1-R)*c*F*(L+R*E*(z+R*B*(-1+2*b(z)))),A=r(S-T)<=this.DISTANCE_CONVERGENCE;return O=I*(b(n)-b(l))/b(l),N=1+O/16384*(4096+O*(-768+O*(320-175*O))),H=O/1024*(256+O*(-128+O*(74-47*O))),V=H*E*(z+H/4*(B*(-1+2*b(z))-H/6*z*(-3+4*b(E))*(-3+4*b(z)))),U=a(C*M,m*x-g*C*P),W=a(m*M,-g*C+m*x*P),{distance:w(l*N*(L-V),this.DISTANCE_PRECISION),azimuthFrom:_(U),azimuthTo:_(W)}}});k.fn.toString=function(){return u.format(this.FORMAT,this.lng,this.lat)},k.fromLngLat=function(e){return new k(e[1],e[0])},k.fromLatLng=function(e){return new k(e[0],e[1])},k.create=function(e,n){return v(e)?e instanceof k?e.clone():1===arguments.length&&2===e.length?k.fromLatLng(e):new k(e,n):t},n=f.extend({init:function(e,t){e=k.create(e),t=k.create(t),e.lng+180>t.lng+180&&t.lat+90>e.lat+90?(this.se=e,this.nw=t):(this.se=t,this.nw=e)},contains:function(e){var t=this.nw,n=this.se,i=x(e.lng,e[1]),r=x(e.lat,e[0]);return e&&i+180>=t.lng+180&&n.lng+180>=i+180&&r+90>=n.lat+90&&t.lat+90>=r+90},center:function(){var e=this.nw,t=this.se,n=e.lng+(t.lng-e.lng)/2,i=e.lat+(t.lat-e.lat)/2;return new k(i,n)},containsAny:function(e){var t,n=!1;for(t=0;e.length>t;t++)n=n||this.contains(e[t]);return n},include:function(e){var t=this.nw,n=this.se,i=x(e.lng,e[1]),r=x(e.lat,e[0]);t.lng=c(t.lng,i),t.lat=l(t.lat,r),n.lng=l(n.lng,i),n.lat=c(n.lat,r)},includeAll:function(e){for(var t=0;e.length>t;t++)this.include(e[t])},edges:function(){var e=this.nw,t=this.se;return{nw:this.nw,ne:new k(e.lat,t.lng),se:this.se,sw:new k(t.lat,e.lng)}},toArray:function(){var e=this.nw,t=this.se;return[e,new k(e.lat,t.lng),t,new k(t.lat,e.lng)]},overlaps:function(e){return this.containsAny(e.toArray())||e.containsAny(this.toArray())}}),n.World=new n([90,-180],[-90,180]),n.create=function(e,i){return e instanceof n?e:e&&i?new n(e,i):e&&4===e.length&&!i?new n([e[0],e[1]],[e[2],e[3]]):t},g(p,{map:{Extent:n,Location:k}})}(window.kendo.jQuery),function(){var e=window.kendo,t=e.ui.Widget,n=e.template,i=e.util.valueOrDefault,r=e.util.defined,o=t.extend({init:function(e,n){t.fn.init.call(this,e,n),this._initOptions(n),this.items=[],this.element.addClass("k-widget k-attribution")},options:{name:"Attribution",separator:"&nbsp;|&nbsp;",itemTemplate:"#= text #"},filter:function(e,t){this._extent=e,this._zoom=t,this._render()},add:function(e){r(e)&&("string"==typeof e&&(e={text:e}),this.items.push(e),this._render())},remove:function(e){var t,n,i=[];for(t=0;this.items.length>t;t++)n=this.items[t],n.text!==e&&i.push(n);this.items=i,this._render()},clear:function(){this.items=[],this.element.empty()},_render:function(){var e,t,i,r=[],o=n(this.options.itemTemplate);for(e=0;this.items.length>e;e++)t=this.items[e],i=this._itemText(t),""!==i&&r.push(o({text:i}));r.length>0?this.element.empty().append(r.join(this.options.separator)).show():this.element.hide()},_itemText:function(e){var t="",n=this._inZoomLevel(e.minZoom,e.maxZoom),i=this._inArea(e.extent);return n&&i&&(t+=e.text),t},_inZoomLevel:function(e,t){var n=!0;return e=i(e,-Number.MAX_VALUE),t=i(t,Number.MAX_VALUE),n=this._zoom>e&&t>this._zoom},_inArea:function(e){var t=!0;return e&&(t=e.contains(this._extent)),t}});e.dataviz.ui.plugin(o)}(window.kendo.jQuery),function(e){function t(e){return n.format('<button class="k-button k-navigator-{0}"><span class="k-icon k-i-arrow-{0}"/></button>',e)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=".kendoNavigator",s=t("n")+t("e")+t("s")+t("w"),l=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-header k-shadow k-navigator").append(s).on("click"+a,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"Navigator",panStep:1},events:["pan"],dispose:function(){this._keyroot.off("keydown",this._keydown)},_pan:function(e,t){var n=this.options.panStep;this.trigger("pan",{x:e*n,y:t*n})},_click:function(t){var n=0,i=0,r=e(t.currentTarget);r.is(".k-navigator-n")?i=1:r.is(".k-navigator-s")?i=-1:r.is(".k-navigator-e")?n=1:r.is(".k-navigator-w")&&(n=-1),this._pan(n,i),t.preventDefault()},_keydown:function(e){switch(e.which){case r.UP:this._pan(0,1),e.preventDefault();break;case r.DOWN:this._pan(0,-1),e.preventDefault();break;case r.RIGHT:this._pan(1,0),e.preventDefault();break;case r.LEFT:this._pan(-1,0),e.preventDefault()}}});n.dataviz.ui.plugin(l)}(window.kendo.jQuery),function(e){function t(e,t){return n.format('<button class="k-button k-zoom-{0}" title="zoom-{0}">{1}</button>',e,t)}var n=window.kendo,i=n.ui.Widget,r=n.keys,o=e.proxy,a=".kendoZoomControl",s=t("in","+")+t("out","-"),l=187,c=189,d=61,h=173,u=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this._initOptions(t),this.element.addClass("k-widget k-zoom-control k-button-wrap k-buttons-horizontal").append(s).on("click"+a,".k-button",o(this,"_click"));var r=this.element.parent().closest("["+n.attr("role")+"]");this._keyroot=r.length>0?r:this.element,this._tabindex(this._keyroot),this._keydown=o(this._keydown,this),this._keyroot.on("keydown",this._keydown)},options:{name:"ZoomControl",zoomStep:1},events:["change"],_change:function(e){var t=this.options.zoomStep;this.trigger("change",{delta:e*t})},_click:function(t){var n=e(t.currentTarget),i=1;n.is(".k-zoom-out")&&(i=-1),this._change(i),t.preventDefault()},_keydown:function(e){switch(e.which){case r.NUMPAD_PLUS:case l:case d:this._change(1);break;case r.NUMPAD_MINUS:case c:case h:this._change(-1)}}});n.dataviz.ui.plugin(u)}(window.kendo.jQuery),function(){var e=Math,t=e.atan,n=e.exp,i=e.pow,r=e.sin,o=e.log,a=e.tan,s=window.kendo,l=s.Class,c=s.dataviz,d=s.deepExtend,h=s.geometry,u=h.Point,f=c.map,p=f.Location,g=s.util,m=g.rad,v=g.deg,_=g.limitValue,y=e.PI,w=y/2,b=y/4,x=y/180,k={a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149},C=l.extend({init:function(e){this._initOptions(e)},MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12,options:{centralMeridian:0,datum:k},forward:function(e,t){var n=this,i=n.options,r=i.datum,o=r.a,a=i.centralMeridian,s=_(e.lat,-n.MAX_LAT,n.MAX_LAT),l=t?_(e.lng,-n.MAX_LNG,n.MAX_LNG):e.lng,c=m(l-a)*o,d=n._projectLat(s);return new u(c,d)},_projectLat:function(e){var t=this.options.datum,n=t.e,s=t.a,l=m(e),c=a(b+l/2),d=n*r(l),h=i((1-d)/(1+d),n/2);return s*o(c*h)},inverse:function(e,t){var n=this,i=n.options,r=i.datum,o=r.a,a=i.centralMeridian,s=e.x/(x*o)+a,l=_(n._inverseY(e.y),-n.MAX_LAT,n.MAX_LAT);return t&&(s=_(s,-n.MAX_LNG,n.MAX_LNG)),new p(l,s)},_inverseY:function(o){var a,s,l,c,d=this,h=d.options.datum,u=h.a,f=h.e,p=f/2,g=n(-o/u),m=w-2*t(g);for(a=0;d.INVERSE_ITERATIONS>=a&&(s=f*r(m),l=i((1-s)/(1+s),p),c=w-2*t(g*l)-m,m+=c,!(e.abs(c)<=d.INVERSE_CONVERGENCE));a++);return v(m)}}),S=C.extend({MAX_LAT:85.0511287798,_projectLat:function(e){var t=this.options.datum.a,n=m(e),i=a(b+n/2);return t*o(i)},_inverseY:function(e){var i=this.options.datum.a,r=n(-e/i);return v(w-2*t(r))}}),T=l.extend({forward:function(e){return new u(e.lng,e.lat)},inverse:function(e){return new p(e.y,e.x)}}),D=l.extend({init:function(){var e=this,t=e._proj=new S,n=this.c=2*y*t.options.datum.a;this._tm=h.transform().translate(.5,.5).scale(1/n,-1/n),this._itm=h.transform().scale(n,-n).translate(-.5,-.5)},toPoint:function(e,t,n){var i=this._proj.forward(e,n);return i.transform(this._tm).scale(t||1)},toLocation:function(e,t,n){return e=e.clone().scale(1/(t||1)).transform(this._itm),this._proj.inverse(e,n)}}),A=l.extend({init:function(){this._proj=new C},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}}),M=l.extend({init:function(){this._proj=new T},toPoint:function(e){return this._proj.forward(e)},toLocation:function(e){return this._proj.inverse(e)}});d(c,{map:{crs:{EPSG3395:A,EPSG3857:D,EPSG4326:M},datums:{WGS84:k},projections:{Equirectangular:T,Mercator:C,SphericalMercator:S}}})}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.Class,r=n.dataviz,o=n.deepExtend,a=r.map.Extent,s=n.util,l=s.defined,c=i.extend({init:function(n,i){this._initOptions(i),this.map=n,this.element=e("<div class='k-layer'></div>").css({zIndex:this.options.zIndex,opacity:this.options.opacity}).appendTo(n.scrollElement),this._beforeReset=t(this._beforeReset,this),this._reset=t(this._reset,this),this._resize=t(this._resize,this),this._panEnd=t(this._panEnd,this),this._activate(),this._updateAttribution()},destroy:function(){this._deactivate()},show:function(){this.reset(),this._activate(),this._applyExtent(!0)},hide:function(){this._deactivate(),this._setVisibility(!1)},reset:function(){this._beforeReset(),this._reset()},_reset:function(){this._applyExtent()},_beforeReset:e.noop,_resize:e.noop,_panEnd:function(){this._applyExtent()},_applyExtent:function(){var e=this.options,t=this.map.zoom(),n=!l(e.minZoom)||t>=e.minZoom,i=!l(e.maxZoom)||e.maxZoom>=t,r=a.create(e.extent),o=!r||r.overlaps(this.map.extent());this._setVisibility(n&&i&&o)},_setVisibility:function(e){this.element.css("display",e?"":"none")},_activate:function(){var e=this.map;e.bind("beforeReset",this._beforeReset),e.bind("reset",this._reset),e.bind("resize",this._resize),e.bind("panEnd",this._panEnd)},_deactivate:function(){var e=this.map;e.unbind("beforeReset",this._beforeReset),e.unbind("reset",this._reset),e.unbind("resize",this._resize),e.unbind("panEnd",this._panEnd)},_updateAttribution:function(){var e=this.map.attribution;e&&e.add(this.options.attribution)}});o(r,{map:{layers:{Layer:c}}})}(window.kendo.jQuery),function(e){var t=Math,n=window.kendo,i=n.deepExtend,r=e.inArray,o={observers:function(){return this._observers=this._observers||[]},addObserver:function(e){return this._observers?this._observers.push(e):this._observers=[e],this},removeObserver:function(e){var t=this.observers(),n=r(e,t);return-1!=n&&t.splice(n,1),this},trigger:function(e,t){var n,i,r=this._observers;if(r&&!this._suspended)for(i=0;r.length>i;i++)n=r[i],n[e]&&n[e](t);return this},optionsChange:function(e){this.trigger("optionsChange",e)},geometryChange:function(e){this.trigger("geometryChange",e)},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=t.max((this._suspended||0)-1,0),this},_observerField:function(e,t){this[e]&&this[e].removeObserver(this),this[e]=t,t.addObserver(this)}};i(n,{mixins:{ObserversMixin:o}})}(window.kendo.jQuery),function(e){function t(e){return null===e?null:e instanceof m?e:new m(e)}function n(e){return e&&y.isFunction(e.matrix)?e.matrix():e}function i(e,t,n,i){var r=0,o=0;return i&&(r=v.atan2(i.c*n,i.a*t),0!==i.b&&(o=v.atan2(i.d*n,i.b*t))),{x:r,y:o}}function r(e,t){for(;t>e;)e+=90;return e}function o(e,t){var n,i,r;for(n=0;t.length>n;n++)i=t[n],r=i.charAt(0).toUpperCase()+i.substring(1,i.length),e["set"+r]=a(i),e["get"+r]=s(i)}function a(e){return function(t){return this[e]!==t&&(this[e]=t,this.geometryChange()),this}}function s(e){return function(){return this[e]}}function l(e,t,n){e>t&&(t+=360);var i=v.abs(t-e);return n||(i=360-i),i}function c(e,t,n,i,r,o){var a=D((r-e)/n,3),s=D((o-t)/i,3);return D(T(v.atan2(s,a)))}function d(e,t,n,i,r,o,a,s){var d,h,u,f,p,g,m,y,w,b,x,k,C,S,T,D,A,M;if(t!==i)w=n-e,b=i-t,x=_(r,2),k=_(o,2),C=(k*w*(e+n)+x*b*(t+i))/(2*x*b),S=C-i,T=-(w*k)/(x*b),p=1/x+_(T,2)/k,g=2*(T*S/k-n/x),m=_(n,2)/x+_(S,2)/k-1,y=v.sqrt(_(g,2)-4*p*m),d=(-g-y)/(2*p),h=C+T*d,u=(-g+y)/(2*p),f=C+T*u;else{if(e===n)return!1;g=-2*i,m=_((n-e)*o/(2*r),2)+_(i,2)-_(o,2),y=v.sqrt(_(g,2)-4*m),d=u=(e+n)/2,h=(-g-y)/2,f=(-g+y)/2}return D=c(d,h,r,o,e,t),A=c(d,h,r,o,n,i),M=l(D,A,s),(a&&180>=M||!a&&M>180)&&(d=u,h=f,D=c(d,h,r,o,e,t),A=c(d,h,r,o,n,i)),{center:new E(d,h),startAngle:D,endAngle:A}}var h,u,f,p,g,m,v=Math,_=v.pow,y=window.kendo,w=y.Class,b=y.deepExtend,x=y.mixins.ObserversMixin,k=y.util,C=k.defined,S=k.rad,T=k.deg,D=k.round,A=v.PI/2,M=k.MIN_NUM,P=k.MAX_NUM,E=w.extend({init:function(e,t){this.x=e||0,this.y=t||0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new E(this.x,this.y)},rotate:function(e,n){return this.transform(t().rotate(e,n))},translate:function(e,t){return this.x+=e,this.y+=t,this.geometryChange(),this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){return this.x=this.y=0,this.translate(e,t)},scale:function(e,t){return C(t)||(t=e),this.x*=e,this.y*=t,this.geometryChange(),this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var t=n(e),i=this.x,r=this.y;return this.x=t.a*i+t.c*r+t.e,this.y=t.b*i+t.d*r+t.f,this.geometryChange(),this},transformCopy:function(e){var t=this.clone();return e&&t.transform(e),t},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return v.sqrt(t*t+n*n)},round:function(e){return this.x=D(this.x,e),this.y=D(this.y,e),this.geometryChange(),this},toArray:function(e){var t=C(e),n=t?D(this.x,e):this.x,i=t?D(this.y,e):this.y;return[n,i]}});o(E.fn,["x","y"]),b(E.fn,x),E.fn.toString=function(e,t){var n=this.x,i=this.y;return C(e)&&(n=D(n,e),i=D(i,e)),t=t||" ",n+t+i},E.create=function(e,t){return C(e)?e instanceof E?e:1===arguments.length&&2===e.length?new E(e[0],e[1]):new E(e,t):void 0},E.min=function(){var e,t,n=k.MAX_NUM,i=k.MAX_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=v.min(t.x,n),i=v.min(t.y,i);return new E(n,i)},E.max=function(){var e,t,n=k.MIN_NUM,i=k.MIN_NUM;for(e=0;arguments.length>e;e++)t=arguments[e],n=v.max(t.x,n),i=v.max(t.y,i);return new E(n,i)},E.minPoint=function(){return new E(M,M)},E.maxPoint=function(){return new E(P,P)},E.ZERO=new E(0,0),h=w.extend({init:function(e,t){this.width=e||0,this.height=t||0},equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new h(this.width,this.height)},toArray:function(e){var t=C(e),n=t?D(this.width,e):this.width,i=t?D(this.height,e):this.height;return[n,i]}}),o(h.fn,["width","height"]),b(h.fn,x),h.create=function(e,t){return C(e)?e instanceof h?e:1===arguments.length&&2===e.length?new h(e[0],e[1]):new h(e,t):void 0},h.ZERO=new h(0,0),u=w.extend({init:function(e,t){this.setOrigin(e||new E),this.setSize(t||new h)},clone:function(){return new u(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){return this._observerField("origin",E.create(e)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(e){return this._observerField("size",h.create(e)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e),n=this.topRight().transformCopy(e),i=this.bottomRight().transformCopy(e),r=this.bottomLeft().transformCopy(e);return u.fromPoints(t,n,i,r)}}),b(u.fn,x),u.fromPoints=function(){var e=E.min.apply(this,arguments),t=E.max.apply(this,arguments),n=new h(t.x-e.x,t.y-e.y);return new u(e,n)},u.union=function(e,t){return u.fromPoints(E.min(e.topLeft(),t.topLeft()),E.max(e.bottomRight(),t.bottomRight()))},u.intersect=function(e,t){return e={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y},t={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},t.right>=e.left&&e.right>=t.left&&t.bottom>=e.top&&e.bottom>=t.top?u.fromPoints(new E(v.max(e.left,t.left),v.max(e.top,t.top)),new E(v.min(e.right,t.right),v.min(e.bottom,t.bottom))):void 0},f=w.extend({init:function(e,t){this.setCenter(e||new E),this.setRadius(t||0)},setCenter:function(e){return this._observerField("center",E.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new f(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(S(e))},bbox:function(e){var t,n,r,o,a=E.maxPoint(),s=E.minPoint(),l=i(this.center,this.radius,this.radius,e);for(t=0;4>t;t++)n=this._pointAt(l.x+t*A).transformCopy(e),r=this._pointAt(l.y+t*A).transformCopy(e),o=new E(n.x,r.y),a=E.min(a,o),s=E.max(s,o);return u.fromPoints(a,s)},_pointAt:function(e){var t=this.center,n=this.radius;return new E(t.x-n*v.cos(e),t.y-n*v.sin(e))}}),o(f.fn,["radius"]),b(f.fn,x),p=w.extend({init:function(e,t){this.setCenter(e||new E),t=t||{},this.radiusX=t.radiusX,this.radiusY=t.radiusY||t.radiusX,this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.anticlockwise=t.anticlockwise||!1},clone:function(){return new p(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(e){return this._observerField("center",E.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(e){var t=this.center,n=S(e);return new E(t.x+this.radiusX*v.cos(n),t.y+this.radiusY*v.sin(n))},curvePoints:function(){var e,t,n,i=this.startAngle,r=this.anticlockwise?-1:1,o=[this.pointAt(i)],a=i,s=this._arcInterval(),l=s.endAngle-s.startAngle,c=v.ceil(l/this.MAX_INTERVAL),d=l/c;for(e=1;c>=e;e++)t=a+r*d,n=this._intervalCurvePoints(a,t),o.push(n.cp1,n.cp2,n.p2),a=t;return o},bbox:function(e){for(var t,n,o=this,a=o._arcInterval(),s=a.startAngle,l=a.endAngle,c=i(this.center,this.radiusX,this.radiusY,e),d=T(c.x),h=T(c.y),f=o.pointAt(s).transformCopy(e),p=o.pointAt(l).transformCopy(e),g=E.min(f,p),m=E.max(f,p),v=r(d,s),_=r(h,s);l>v||l>_;)l>v&&(t=o.pointAt(v).transformCopy(e),v+=90),l>_&&(n=o.pointAt(_).transformCopy(e),_+=90),f=new E(t.x,n.y),g=E.min(g,f),m=E.max(m,f);return u.fromPoints(g,m)},_arcInterval:function(){var e,t=this.startAngle,n=this.endAngle,i=this.anticlockwise;return i&&(e=t,t=n,n=e),(t>n||i&&t===n)&&(n+=360),{startAngle:t,endAngle:n}},_intervalCurvePoints:function(e,t){var n=this,i=n.pointAt(e),r=n.pointAt(t),o=n._derivativeAt(e),a=n._derivativeAt(t),s=(S(t)-S(e))/3,l=new E(i.x+s*o.x,i.y+s*o.y),c=new E(r.x-s*a.x,r.y-s*a.y);return{p1:i,cp1:l,cp2:c,p2:r}},_derivativeAt:function(e){var t=this,n=S(e);return new E(-t.radiusX*v.sin(n),t.radiusY*v.cos(n))}}),o(p.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),b(p.fn,x),p.fromPoints=function(e,t,n,i,r,o){var a=d(e.x,e.y,t.x,t.y,n,i,r,o);return new p(a.center,{startAngle:a.startAngle,endAngle:a.endAngle,radiusX:n,radiusY:i,anticlockwise:0===o})},g=w.extend({init:function(e,t,n,i,r,o){this.a=e||0,this.b=t||0,this.c=n||0,this.d=i||0,this.e=r||0,this.f=o||0},multiplyCopy:function(e){return new g(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},clone:function(){return new g(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){return e?this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f:!1},round:function(e){return this.a=D(this.a,e),this.b=D(this.b,e),this.c=D(this.c,e),this.d=D(this.d,e),this.e=D(this.e,e),this.f=D(this.f,e),this},toArray:function(e){var t,n=[this.a,this.b,this.c,this.d,this.e,this.f];if(C(e))for(t=0;n.length>t;t++)n[t]=D(n[t],e);return n}}),g.fn.toString=function(e,t){return this.toArray(e).join(t||",")},g.translate=function(e,t){return new g(1,0,0,1,e,t)},g.unit=function(){return new g(1,0,0,1,0,0)},g.rotate=function(e,t,n){var i=new g;return i.a=v.cos(S(e)),i.b=v.sin(S(e)),i.c=-i.b,i.d=i.a,i.e=t-t*i.a+n*i.b||0,i.f=n-n*i.a-t*i.b||0,i},g.scale=function(e,t){return new g(e,0,0,t,0,0)},g.IDENTITY=g.unit(),m=w.extend({init:function(e){this._matrix=e||g.unit()},clone:function(){return new m(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(e,t){return this._matrix=this._matrix.multiplyCopy(g.translate(e,t)),this._optionsChange(),this},scale:function(e,t,n){return C(t)||(t=e),n&&(n=E.create(n),this._matrix=this._matrix.multiplyCopy(g.translate(n.x,n.y))),this._matrix=this._matrix.multiplyCopy(g.scale(e,t)),n&&(this._matrix=this._matrix.multiplyCopy(g.translate(-n.x,-n.y))),this._optionsChange(),this},rotate:function(e,t){return t=E.create(t)||E.ZERO,this._matrix=this._matrix.multiplyCopy(g.rotate(e,t.x,t.y)),this._optionsChange(),this},multiply:function(e){var t=n(e);return this._matrix=this._matrix.multiplyCopy(t),this._optionsChange(),this},matrix:function(){return this._matrix}}),b(m.fn,x),b(y,{geometry:{Arc:p,Circle:f,Matrix:g,Point:E,Rect:u,Size:h,Transformation:m,transform:t,toMatrix:n}}),y.dataviz.geometry=y.geometry}(window.kendo.jQuery),function(e){var t=e.proxy,n=window.kendo,i=n.Class,r=n.data.DataSource,o=n.dataviz,a=n.deepExtend,s=n.util.last,l=n.util.defined,c=n.geometry,d=n.drawing,h=d.Group,u=o.map,f=u.Location,p=u.layers.Layer,g=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this.surface=d.Surface.create(this.element,{width:e.scrollElement.width(),height:e.scrollElement.height()}),this._initRoot(),this.movable=new n.ui.Movable(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseenter=this._handler("shapeMouseEnter"),this.surface.bind("mouseenter",this._mouseenter),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this._initDataSource()},options:{autoBind:!0},destroy:function(){p.fn.destroy.call(this),this.surface.destroy(),this.dataSource.unbind("change",this._dataChange)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_reset:function(){p.fn._reset.call(this),this._translateSurface(),this._data&&this._load(this._data)},_initRoot:function(){this._root=new h,this.surface.draw(this._root)},_beforeReset:function(){this.surface.clear(),this._initRoot()},_resize:function(){this.surface.size(this.map.size())},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=t(this._dataChange,this),this.dataSource=r.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._data=e.sender.view(),this._load(this._data)},_load:function(e){var t,n,i;for(this._clearMarkers(),this._loader||(this._loader=new m(this.map,this.options.style,this)),t=new h,n=0;e.length>n;n++)i=this._loader.parse(e[n]),i&&t.append(i);this._root.clear(),this._root.append(t)},shapeCreated:function(e){var t,n=!1;return e instanceof d.Circle&&(n=l(this._createMarker(e))),n||(t={layer:this,shape:e},n=this.map.trigger("shapeCreated",t)),n},_createMarker:function(e){var t=this.map.markers.bind({location:e.location},e.dataItem);return t&&this._markers.push(t),t},_clearMarkers:function(){for(var e=0;this._markers.length>e;e++)this.map.markers.remove(this._markers[e]);this._markers=[]},_panEnd:function(e){p.fn._panEnd.call(this,e),this._translateSurface()},_translateSurface:function(){var e=this.map,t=e.locationToView(e.extent().nw);this.surface.translate&&(this.surface.translate(t),this.movable.moveTo({x:t.x,y:t.y}))},_handler:function(e){var t=this;return function(n){if(n.element){var i={layer:t,shape:n.element,originalEvent:n.originalEvent};t.map.trigger(e,i)}}}}),m=i.extend({init:function(e,t,n){this.observer=n,this.locator=e,this.style=t},parse:function(e){var t=new h;return"Feature"===e.type?this._loadGeometryTo(t,e.geometry,e):this._loadGeometryTo(t,e,e),2>t.children.length&&(t=t.children[0]),t},_shapeCreated:function(e){var t=!1;return this.observer&&this.observer.shapeCreated&&(t=this.observer.shapeCreated(e)),t},_loadGeometryTo:function(e,t,n){var i,r,o=t.coordinates;switch(t.type){case"LineString":r=this._loadPolygon(e,[o],n),this._setLineFill(r);break;case"MultiLineString":for(i=0;o.length>i;i++)r=this._loadPolygon(e,[o[i]],n),this._setLineFill(r);break;case"Polygon":this._loadPolygon(e,o,n);break;case"MultiPolygon":for(i=0;o.length>i;i++)this._loadPolygon(e,o[i],n);break;case"Point":this._loadPoint(e,o,n);break;case"MultiPoint":for(i=0;o.length>i;i++)this._loadPoint(e,o[i],n)}},_setLineFill:function(e){var t=e.segments;(4>t.length||!t[0].anchor().equals(s(t).anchor()))&&(e.options.fill=null)},_loadShape:function(e,t){return this._shapeCreated(t)||e.append(t),t},_loadPolygon:function(e,t,n){var i=this._buildPolygon(t);return i.dataItem=n,this._loadShape(e,i)},_buildPolygon:function(e){var t,n,i,r=e.length>1?d.MultiPath:d.Path,o=new r(this.style);for(t=0;e.length>t;t++)for(n=0;e[t].length>n;n++)i=this.locator.locationToView(f.fromLngLat(e[t][n])),0===n?o.moveTo(i.x,i.y):o.lineTo(i.x,i.y);return o},_loadPoint:function(e,t,n){var i=f.fromLngLat(t),r=this.locator.locationToView(i),o=new c.Circle(r,10),a=new d.Circle(o,this.style);return a.dataItem=n,a.location=i,this._loadShape(e,a)}});a(n.data,{schemas:{geojson:{type:"json",data:function(e){return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e}}},transports:{geojson:{read:{dataType:"json"}}}}),a(o,{map:{layers:{shape:g,ShapeLayer:g},GeoJSONLoader:m}})}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.getter,i=t.dataviz,r=t.deepExtend,o=t.util,a=o.defined,s=t.geometry,l=t.drawing,c=i.map,d=c.Location,h=c.layers.ShapeLayer,u=h.extend({options:{autoBind:!0,locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle"},_load:function(e){var t,i,r,o,s,l,c,h,u,f,p,g;if(0!==e.length)for(t=this.options,i=n(t.valueField),e=e.slice(0),e.sort(function(e,t){return i(t)-i(e)}),r=i(e[0]),o=this._scaleType(),l=0;e.length>l;l++)c=e[l],h=n(t.locationField)(c),u=n(t.valueField)(c),a(h)&&a(u)&&(s||(s=new o([0,u],[t.minSize,t.maxSize])),h=d.create(h),f=this.map.locationToView(h),p=s.map(u),g=this._createSymbol({center:f,size:p,style:t.style,dataItem:c,location:h}),g.dataItem=c,g.location=h,g.value=u,this._drawSymbol(g))},_scaleType:function(){var e=this.options.scale;return t.isFunction(e)?e:i.map.scales[e]},_createSymbol:function(e){var n=this.options.symbol;return t.isFunction(n)||(n=i.map.symbols[n]),n(e)},_drawSymbol:function(e){var t={layer:this,shape:e},n=this.map.trigger("shapeCreated",t);n||this.surface.draw(e)}}),f=t.Class.extend({init:function(e,t){var n,i;this._domain=e,this._range=t,n=Math.sqrt(e[1])-Math.sqrt(e[0]),i=t[1]-t[0],this._ratio=i/n},map:function(e){var t=(Math.sqrt(e)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+t}}),p={circle:function(e){var t=new s.Circle(e.center,e.size/2);return new l.Circle(t,e.style)},square:function(e){var t=new l.Path(e.style),n=e.size/2,i=e.center;return t.moveTo(i.x-n,i.y-n).lineTo(i.x+n,i.y-n).lineTo(i.x+n,i.y+n).lineTo(i.x-n,i.y+n).close(),t}};r(i,{map:{layers:{bubble:u,BubbleLayer:u},scales:{sqrt:f},symbols:p}})}(window.kendo.jQuery),function(e){function t(e){return new h(p(e.x),p(e.y))}function n(e,t){return"x:"+e.x+"y:"+e.y+"zoom:"+t}var i=Math,r=e.proxy,o=window.kendo,a=o.Class,s=o.template,l=o.dataviz,c=o.deepExtend,d=o.geometry,h=d.Point,u=l.map.layers.Layer,f=o.util,p=f.round,g=f.renderSize,m=f.limitValue,v=u.extend({init:function(e,t){u.fn.init.call(this,e,t),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var n=this._viewType();this._view=new n(this.element,this.options)},destroy:function(){u.fn.destroy.call(this),this._view.destroy(),this._view=null},_reset:function(){u.fn._reset.call(this),this._updateView(),this._view.clear(),this._view.reset()},_viewType:function(){return _},_activate:function(){u.fn._activate.call(this),o.support.mobileOS||(this._pan||(this._pan=o.throttle(r(this._render,this),100)),this.map.bind("pan",this._pan))
},_deactivate:function(){u.fn._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},_updateView:function(){var e=this._view,t=this.map,n=t.extent(),i={nw:t.locationToLayer(n.nw).round(),se:t.locationToLayer(n.se).round()};e.center(t.locationToLayer(t.center())),e.extent(i),e.zoom(t.zoom())},_resize:function(){this._render()},_panEnd:function(e){u.fn._panEnd.call(this,e),this._render()},_render:function(){this._updateView(),this._view.render()}}),_=a.extend({init:function(e,t){this.element=e,this._initOptions(t),this.pool=new w},options:{tileSize:256,subdomains:["a","b","c"],urlTemplate:""},center:function(e){this._center=e},extent:function(e){this._extent=e},zoom:function(e){this._zoom=e},pointToTileIndex:function(e){return new h(i.floor(e.x/this.options.tileSize),i.floor(e.y/this.options.tileSize))},clear:function(){this.pool.empty()},tileCount:function(){var e=this.size(),t=this.pointToTileIndex(this._extent.nw),n=this._extent.nw,r=this.indexToPoint(t).translate(-n.x,-n.y);return{x:i.ceil((i.abs(r.x)+e.width)/this.options.tileSize),y:i.ceil((i.abs(r.y)+e.height)/this.options.tileSize)}},size:function(){var e=this._extent.nw,t=this._extent.se,n=t.clone().translate(-e.x,-e.y);return{width:n.x,height:n.y}},indexToPoint:function(e){var t=e.x,n=e.y;return new h(t*this.options.tileSize,n*this.options.tileSize)},subdomainText:function(){var e=this.options.subdomains;return e[this.subdomainIndex++%e.length]},destroy:function(){this.element.empty(),this.pool.empty()},reset:function(){this.subdomainIndex=0,this.basePoint=this._extent.nw,this.render()},render:function(){var e,t,n,i=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(t=0;i.x>t;t++)for(n=0;i.y>n;n++)e=this.createTile({x:r.x+t,y:r.y+n}),e.options.visible||(this.element.append(e.element),e.options.visible=!0)},createTile:function(e){var t=this.tileOptions(e);return this.pool.get(this._center,t)},tileOptions:function(e){var n=this.wrapIndex(e),i=this.indexToPoint(e),r=this.basePoint,o=i.clone().translate(-r.x,-r.y);return{index:n,currentIndex:e,point:i,offset:t(o),zoom:this._zoom,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},wrapIndex:function(e){var t=i.pow(2,this._zoom);return{x:this.wrapValue(e.x,t),y:m(e.y,0,t-1)}},wrapValue:function(e,t){var n=i.abs(e)%t;return e=e>=0?n:t-(0===n?t:n)}}),y=a.extend({init:function(e){this._initOptions(e),this.createElement(),this.load(),this.options.visible=!1},options:{urlTemplate:"",errorUrlTemplate:"",visible:!1},createElement:function(){this.element=e("<img style='position: absolute; display: block; visibility: visible;' />").error(r(function(e){this.errorUrl()?e.target.setAttribute("src",this.errorUrl()):e.target.removeAttribute("src")},this))},load:function(e){this.options=c({},this.options,e);var t=this.element[0];t.style.visibility="visible",t.style.display="block",t.style.top=g(this.options.offset.y),t.style.left=g(this.options.offset.x),t.setAttribute("src",this.url()),this.options.id=n(this.options.currentIndex,this.options.zoom),this.options.visible=!0},url:function(){var e=s(this.options.urlTemplate);return e(this.urlOptions())},errorUrl:function(){var e=s(this.options.errorUrlTemplate);return e(this.urlOptions())},urlOptions:function(){var e=this.options;return{zoom:e.zoom,subdomain:e.subdomain,z:e.zoom,x:e.index.x,y:e.index.y,s:e.subdomain,quadkey:e.quadkey,q:e.quadkey,culture:e.culture,c:e.culture}},destroy:function(){this.element&&(this.element.remove(),this.element=null)}}),w=a.extend({init:function(){this._items=[]},options:{maxSize:100},get:function(e,t){var n,i=this;return n=i._items.length>=i.options.maxSize?i._update(e,t):i._create(t)},empty:function(){var e,t=this._items;for(e=0;t.length>e;e++)t[e].destroy();this._items=[]},_create:function(e){var t,i,r,o,a=this,s=a._items,l=n(e.currentIndex,e.zoom);for(i=0;s.length>i;i++)r=s[i],r.options.id===l&&(t=r,o=t);return t?t.load(e):(o=new y(e),this._items.push(o)),o},_update:function(e,t){var i,r,o,a,s=this,l=s._items,c=-Number.MAX_VALUE,d=n(t.currentIndex,t.zoom);for(o=0;l.length>o;o++){if(a=l[o],i=a.options.point.clone().distanceTo(e),a.options.id===d)return l[o];i>c&&(r=o,c=i)}return l[r].load(t),l[r]}});c(l,{map:{layers:{tile:v,TileLayer:v,ImageTile:y,TilePool:w,TileView:_}}})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.dataviz,r=n.deepExtend,o=n.util.defined,a=i.map.Extent,s=i.map.Location,l=i.map.layers.TileLayer,c=i.map.layers.TileView,d=l.extend({init:function(t,n){l.fn.init.call(this,t,n),this._onMetadata=e.proxy(this._onMetadata,this),this._fetchMetadata()},options:{baseUrl:"//dev.virtualearth.net/REST/v1/Imagery/Metadata/",imagerySet:"road"},_fetchMetadata:function(){var t=this.options;if(!t.key)throw Error("Bing tile layer: API key is required");e.ajax({url:t.baseUrl+t.imagerySet,data:{output:"json",include:"ImageryProviders",key:t.key,uriScheme:this._scheme(window.location.protocol)},type:"get",dataType:"jsonp",jsonp:"jsonp",success:this._onMetadata})},_scheme:function(e){return"https"===e.replace(":","")?"https":"http"},_onMetadata:function(e){var t,n;e&&e.resourceSets.length&&(t=this.resource=e.resourceSets[0].resources[0],r(this._view.options,{urlTemplate:t.imageUrl.replace("{subdomain}","#= subdomain #").replace("{quadkey}","#= quadkey #").replace("{culture}","#= culture #"),subdomains:t.imageUrlSubdomains}),n=this.options,o(n.minZoom)||(n.minZoom=t.zoomMin),o(n.maxZoom)||(n.maxZoom=t.zoomMax),this._addAttribution(),this.reset())},_viewType:function(){return h},_addAttribution:function(){var e,t,n,i,r,o=this.map.attribution;if(o&&(e=this.resource.imageryProviders))for(t=0;e.length>t;t++)for(n=e[t],i=0;n.coverageAreas.length>i;i++)r=n.coverageAreas[i],o.add({text:n.attribution,minZoom:r.zoomMin,maxZoom:r.zoomMax,extent:new a(new s(r.bbox[2],r.bbox[1]),new s(r.bbox[0],r.bbox[3]))})},imagerySet:function(e){return e?(this.options.imagerySet=e,this.map.attribution.clear(),this._fetchMetadata(),this._reset(),t):this.options.imagerySet}}),h=c.extend({options:{culture:"en-US"},tileOptions:function(e){var t=c.fn.tileOptions.call(this,e);return t.culture=this.options.culture,t.quadkey=this.tileQuadKey(this.wrapIndex(e)),t},tileQuadKey:function(e){var t,n,i,r="";for(i=this._zoom;i>0;i--)t=0,n=1<<i-1,0!==(e.x&n)&&t++,0!==(e.y&n)&&(t+=2),r+=t;return r}});r(i,{map:{layers:{bing:d,BingLayer:d,BingView:h}}})}(window.kendo.jQuery),function(e,t){var n=document,i=Math,r=e.inArray,o=e.proxy,a=window.kendo,s=a.Class,l=a.data.DataSource,c=a.ui.Tooltip,d=a.dataviz,h=a.deepExtend,u=d.map,f=u.Location,p=u.layers.Layer,g=p.extend({init:function(e,t){p.fn.init.call(this,e,t),this._markerClick=o(this._markerClick,this),this.element.on("click",".k-marker",this._markerClick),this.items=[],this._initDataSource()},destroy:function(){p.fn.destroy.call(this),this.element.off("click",".k-marker",this._markerClick),this.dataSource.unbind("change",this._dataChange),this.clear()},options:{zIndex:1e3,autoBind:!0,dataSource:{},locationField:"location",titleField:"title"},add:function(t){if(!e.isArray(t))return this._addOne(t);for(var n=0;t.length>n;n++)this._addOne(t[n])},remove:function(e){e.destroy();var t=r(e,this.items);t>-1&&this.items.splice(t,1)},clear:function(){for(var e=0;this.items.length>e;e++)this.items[e].destroy();this.items=[]},update:function(e){var t,n=e.location();n&&(e.showAt(this.map.locationToView(n)),t={marker:e,layer:this},this.map.trigger("markerActivate",t))},_reset:function(){var e,t;for(p.fn._reset.call(this),e=this.items,t=0;e.length>t;t++)this.update(e[t])},bind:function(e,n){var i,r,o=u.Marker.create(e,this.options);return o.dataItem=n,i={marker:o,layer:this},r=this.map.trigger("markerCreated",i),r?t:(this.add(o),o)},setDataSource:function(e){this.dataSource&&this.dataSource.unbind("change",this._dataChange),this.dataSource=e,this.dataSource.bind("change",this._dataChange),this.options.autoBind&&this.dataSource.fetch()},_addOne:function(e){var t=m.create(e,this.options);return t.addTo(this),t},_initDataSource:function(){var e=this.options.dataSource;this._dataChange=o(this._dataChange,this),this.dataSource=l.create(e).bind("change",this._dataChange),e&&this.options.autoBind&&this.dataSource.fetch()},_dataChange:function(e){this._load(e.sender.view())},_load:function(e){var t,n,i,r;for(this._data=e,this.clear(),t=a.getter(this.options.locationField),n=a.getter(this.options.titleField),i=0;e.length>i;i++)r=e[i],this.bind({location:t(r),title:n(r)},r)},_markerClick:function(t){var n={marker:e(t.target).data("kendoMarker"),layer:this};this.map.trigger("markerClick",n)}}),m=s.extend({init:function(e){this.options=e||{}},addTo:function(e){this.layer=e.markers||e,this.layer.items.push(this),this.layer.update(this)},location:function(e){return e?(this.options.location=f.create(e).toArray(),this.layer&&this.layer.update(this),this):f.create(this.options.location)},showAt:function(e){this.render(),this.element.css({left:i.round(e.x),top:i.round(e.y)}),this.tooltip&&this.tooltip.popup&&this.tooltip.popup._position()},hide:function(){this.element&&(this.element.remove(),this.element=null),this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)},destroy:function(){this.layer=null,this.hide()},render:function(){var t,i;this.element||(t=this.options,i=this.layer,this.element=e(n.createElement("span")).addClass("k-marker k-marker-"+a.toHyphens(t.shape||"pin")).attr("title",t.title).data("kendoMarker",this).css("zIndex",t.zIndex),i&&i.element.append(this.element),this.renderTooltip())},renderTooltip:function(){var e,t,n=this,i=n.options.title,r=n.options.tooltip||{};r&&c&&(e=r.template,e&&(t=a.template(e),r.content=function(e){return e.location=n.location(),e.marker=n,t(e)}),(i||r.content||r.contentUrl)&&(this.tooltip=new c(this.element,r),this.tooltip.marker=this))}});m.create=function(e,t){return e instanceof m?e:new m(h({},t,e))},h(d,{map:{layers:{marker:g,MarkerLayer:g},Marker:m}})}(window.kendo.jQuery),function(e){var t=document,n=Math,i=n.min,r=n.pow,o=e.proxy,a=window.kendo,s=a.ui.Widget,l=a.deepExtend,c=a.dataviz,d=c.ui,h=a.geometry,u=h.Point,f=c.map,p=f.Extent,g=f.Location,m=f.crs.EPSG3857,v=a.util,_=v.defined,y=v.limitValue,w=v.renderPos,b=v.valueOrDefault,x="k-",k=.9,C=.93,S="DOMMouseScroll mousewheel",T=5,D=s.extend({init:function(e,n){a.destroy(e),s.fn.init.call(this,e),this._initOptions(n),this.bind(this.events,n),this.crs=new m,this.element.addClass(x+this.options.name.toLowerCase()).css("position","relative").empty().append(t.createElement("div")),this._viewOrigin=this._getOrigin(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset(),this._mousewheel=o(this._mousewheel,this),this.element.bind("click",o(this._click,this)),this.element.bind(S,this._mousewheel)},options:{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0},events:["beforeReset","click","reset","pan","panEnd","markerActivate","markerClick","markerCreated","shapeClick","shapeCreated","shapeMouseEnter","shapeMouseLeave","zoomStart","zoomEnd"],destroy:function(){this.scroller.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),this.markers.destroy();for(var e=0;this.layers.length>e;e++)this.layers[e].destroy();s.fn.destroy.call(this)},zoom:function(e){var t=this.options;return _(e)?(e=y(e,t.minZoom,t.maxZoom),t.zoom!==e&&(t.zoom=e,this._reset()),this):t.zoom},center:function(e){return e?(this.options.center=g.create(e).toArray(),this._reset(),this):g.create(this.options.center)},extent:function(e){return e?(this._setExtent(e),this):this._getExtent()},setOptions:function(e){s.fn.setOptions.call(this,e),this._reset()},locationToLayer:function(e,t){var n=!this.options.wraparound;return e=g.create(e),this.crs.toPoint(e,this._layerSize(t),n)},layerToLocation:function(e,t){var n=!this.options.wraparound;return e=u.create(e),this.crs.toLocation(e,this._layerSize(t),n)},locationToView:function(e){var t,n;return e=g.create(e),t=this.locationToLayer(this._viewOrigin),n=this.locationToLayer(e),n.translateWith(t.scale(-1))},viewToLocation:function(e,t){var n=this.locationToLayer(this._getOrigin(),t);return e=u.create(e),e=e.clone().translateWith(n),this.layerToLocation(e,t)},eventOffset:function(e){var t=this.element.offset(),n=e.originalEvent||e,i=b(n.pageX,n.clientX)-t.left,r=b(n.pageY,n.clientY)-t.top;return new h.Point(i,r)},eventToView:function(e){var t=this.eventOffset(e);return this.locationToView(this.viewToLocation(t))},eventToLayer:function(e){return this.locationToLayer(this.eventToLocation(e))},eventToLocation:function(e){var t=this.eventOffset(e);return this.viewToLocation(t)},viewSize:function(){var e=this.element,t=this._layerSize(),n=e.width();return this.options.wraparound||(n=i(t,n)),{width:n,height:i(t,e.height())}},_setOrigin:function(e,t){var n,i=this.viewSize();return e=this._origin=g.create(e),n=this.locationToLayer(e,t),n.x+=i.width/2,n.y+=i.height/2,this.options.center=this.layerToLocation(n,t).toArray(),this},_getOrigin:function(e){var t,n=this.viewSize();return(e||!this._origin)&&(t=this.locationToLayer(this.center()),t.x-=n.width/2,t.y-=n.height/2,this._origin=this.layerToLocation(t)),this._origin},_setExtent:function(e){var t,i,r,o,a,s,l;for(e=p.create(e),this.center(e.center()),t=this.element.width(),i=this.element.height(),r=this.options.maxZoom;r>=this.options.minZoom&&(o=this.locationToLayer(e.nw,r),a=this.locationToLayer(e.se,r),s=n.abs(a.x-o.x),l=n.abs(a.y-o.y),!(t>=s&&i>=l));r--);this.zoom(r)},_getExtent:function(){var e,t=this._getOrigin(),n=this.locationToLayer(t),i=this.viewSize();return n.x+=i.width,n.y+=i.height,e=this.layerToLocation(n),new p(t,e)},_zoomAround:function(e,t){this._setOrigin(this.layerToLocation(e,t),t),this.zoom(t)},_initControls:function(){var e=this.options.controls;d.Attribution&&e.attribution&&this._createAttribution(e.attribution),a.support.mobileOS||(d.Navigator&&e.navigator&&this._createNavigator(e.navigator),d.ZoomControl&&e.zoom&&this._createZoomControl(e.zoom))},_createControlElement:function(t,n){var i=t.position||n,r="."+w(i).replace(" ","."),o=e(".k-map-controls"+r,this.element);return 0===o.length&&(o=e("<div>").addClass("k-map-controls "+w(i)).appendTo(this.element)),e("<div>").appendTo(o)},_createAttribution:function(e){var t=this._createControlElement(e,"bottomRight");this.attribution=new d.Attribution(t,e)},_createNavigator:function(e){var t=this._createControlElement(e,"topLeft"),n=this.navigator=new d.Navigator(t,e);this._navigatorPan=o(this._navigatorPan,this),n.bind("pan",this._navigatorPan),this._navigatorCenter=o(this._navigatorCenter,this),n.bind("center",this._navigatorCenter)},_navigatorPan:function(e){var t=this,n=t.scroller,i=n.scrollLeft+e.x,r=n.scrollTop-e.y,o=this._virtualSize,a=this.element.height(),s=this.element.width();i=y(i,o.x.min,o.x.max-s),r=y(r,o.y.min,o.y.max-a),t.scroller.one("scroll",function(e){t._scrollEnd(e)}),t.scroller.scrollTo(-i,-r)},_navigatorCenter:function(){this.center(this.options.center)},_createZoomControl:function(e){var t=this._createControlElement(e,"topLeft"),n=this.zoomControl=new d.ZoomControl(t,e);this._zoomControlChange=o(this._zoomControlChange,this),n.bind("change",this._zoomControlChange)},_zoomControlChange:function(e){this.trigger("zoomStart",{originalEvent:e})||(this.zoom(this.zoom()+e.delta),this.trigger("zoomEnd",{originalEvent:e}))},_initScroller:function(){var e=a.support.mobileOS?C:k,t=this.options.zoomable!==!1,n=this.scroller=new a.mobile.ui.Scroller(this.element.children(0),{friction:e,velocityMultiplier:T,zoom:t,mousewheelScrolling:!1});n.bind("scroll",o(this._scroll,this)),n.bind("scrollEnd",o(this._scrollEnd,this)),n.userEvents.bind("gesturestart",o(this._scaleStart,this)),n.userEvents.bind("gestureend",o(this._scale,this)),this.scrollElement=n.scrollElement},_initLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[];for(e=0;o.length>e;e++)t=o[e],n=t.type||"shape",i=this.options.layerDefaults[n],r=c.map.layers[n],a.push(new r(this,l({},i,t)))},_initMarkers:function(){this.markers=new f.layers.MarkerLayer(this,this.options.markerDefaults),this.markers.add(this.options.markers)},_scroll:function(e){var t=this.locationToLayer(this._viewOrigin).round(),n=e.sender.movable,i=new h.Point(n.x,n.y).scale(-1).scale(1/n.scale);t.x+=i.x,t.y+=i.y,this._setOrigin(this.layerToLocation(t)),this.trigger("pan",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scrollEnd:function(e){this.trigger("panEnd",{originalEvent:e,origin:this._getOrigin(),center:this.center()})},_scaleStart:function(e){if(this.trigger("zoomStart",{originalEvent:e})){var t=e.touches[1];t&&t.cancel()}},_scale:function(e){var t=this.scroller.movable.scale,n=this._scaleToZoom(t),i=new h.Point(e.center.x,e.center.y),r=this.viewToLocation(i,n),o=this.locationToLayer(r,n),a=o.translate(-i.x,-i.y);this._zoomAround(a,n),this.trigger("zoomEnd",{originalEvent:e})},_scaleToZoom:function(e){var t=this._layerSize()*e,i=t/this.options.minSize,r=n.log(i)/n.log(2);return n.round(r)},_reset:function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.trigger("beforeReset"),this.trigger("reset")},_resetScroller:function(){var e,t,n,i,o=this.scroller,a=o.dimensions.x,s=o.dimensions.y,l=this._layerSize(),c=20*l,d=this.extent().nw,h=this.locationToLayer(d).round();o.movable.round=!0,o.reset(),o.userEvents.cancel(),e=this.options.maxZoom-this.zoom(),o.dimensions.maxScale=r(2,e),t={min:-h.x,max:l-h.x},n={min:-h.y,max:l-h.y},this.options.wraparound&&(t.min=-c,t.max=c),this.options.pannable===!1&&(i=this.viewSize(),t.min=n.min=0,t.max=i.width,n.max=i.height),a.makeVirtual(),s.makeVirtual(),a.virtualSize(t.min,t.max),s.virtualSize(n.min,n.max),this._virtualSize={x:t,y:n}},_renderLayers:function(){var e,t,n,i,r,o=this.options.layers,a=this.layers=[],s=this.scrollWrap;for(s.empty(),e=0;o.length>e;e++)t=o[e],n=t.type||"shape",i=this.options.layerDefaults[n],r=c.map.layers[n],a.push(new r(this,l({},i,t)))},_layerSize:function(e){return e=b(e,this.options.zoom),this.options.minSize*r(2,e)},_click:function(e){var t=this.eventOffset(e);this.trigger("click",{originalEvent:e,location:this.viewToLocation(t)})},_mousewheel:function(e){var t,n,i,r,o,a,s,l;e.preventDefault(),t=c.mwDelta(e)>0?-1:1,n=this.options,i=this.zoom(),r=y(i+t,n.minZoom,n.maxZoom),n.zoomable!==!1&&r!==i&&(this.trigger("zoomStart",{originalEvent:e})||(o=this.eventOffset(e),a=this.viewToLocation(o),s=this.locationToLayer(a,r),l=s.translate(-o.x,-o.y),this._zoomAround(l,r),this.trigger("zoomEnd",{originalEvent:e})))}});c.ui.plugin(D)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});